
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Running the pSConfig Grafana Agent &#8212; perfSONAR Toolkit 5.1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/perfsonar.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pSConfig Web Admin" href="pwa.html" />
    <link rel="prev" title="Running the pSConfig pScheduler Agent" href="psconfig_pscheduler_agent.html" />
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-52RNZ729B1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-52RNZ729B1');
	</script>
	 

  </head><body>
    <header>
        <div class="headerContents">
          <a href="index.html" border="0"><img src="_static/perfsonar-logo-black-full-100.png"></a>
          <div class="acctSearchContainer">
              <section id="searchBox" class="searchBox">
                  <!--Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
                  <!--The terms of service are available at http://www.google.com/cse/docs/tos.html -->
                  <form action="search.html" id="cse-search-box" method="get">
                    <input type="text" name="q" size="25" class="searchInput" placeholder="Search"/>
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                  </form>
              </section>
         </div>
        </div>
    </header>
    <div style="display:block;clear:both;">
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pwa.html" title="pSConfig Web Admin"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="psconfig_pscheduler_agent.html" title="Running the pSConfig pScheduler Agent"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">perfSONAR Toolkit 5.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-the-psconfig-grafana-agent">
<h1>Running the pSConfig Grafana Agent<a class="headerlink" href="#running-the-psconfig-grafana-agent" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="psconfig-grafana-agent-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="psconfig-grafana-agent-s-role">
<span id="psconfig-grafana-agent-intro-role"></span><h3>pSConfig Grafana Agent’s Role<a class="headerlink" href="#psconfig-grafana-agent-s-role" title="Permalink to this headline">¶</a></h3>
<p>The role of the <em>pSConfig Grafana Agent</em> is to read <a class="reference internal" href="psconfig_intro.html"><span class="doc">pSConfig templates</span></a> and generate a set of dashboards to be displayed by Grafana. It does this by communicating with the Grafana API. The Grafana instance may either be local or remote to the Grafana agent. Performing this role is a multi-step process that includes the following:</p>
<ol class="arabic simple">
<li><p>Read the configured templates and optionally apply local modifications</p></li>
<li><p>Determine how to display tasks</p></li>
<li><p>Communicate with Grafana API to create/update/delete dashboards</p></li>
</ol>
<p>These steps are completed anytime one of the following events occur:</p>
<ul class="simple">
<li><p>The agent starts</p></li>
<li><p>Within a configurable amount of time of a change to a <em>local</em> configuration file (changes to remote templates are not detected). By default the value is <em>1 minute</em>.</p></li>
<li><p>If no changes, on a configurable interval after the start of the last run. By default these steps are run every <em>1 hour</em>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="#psconfig-grafana-agent-advanced"><span class="std std-ref">Advanced Configuration</span></a> for more detail on the configuration options mentioned above.</p>
</div>
</div>
</div>
<div class="section" id="installation">
<span id="psconfig-grafana-agent-install"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-the-standalone-package">
<span id="psconfig-grafana-agent-standalone"></span><h3>Installing the Standalone Package<a class="headerlink" href="#installing-the-standalone-package" title="Permalink to this headline">¶</a></h3>
<p>The pSConfig Grafana agent is installed with the package <code class="docutils literal notranslate"><span class="pre">perfsonar-psconfig-grafana</span></code>. You can run the following commands to install it:</p>
<blockquote>
<div><p><em>RedHat</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">install</span> <span class="n">perfsonar</span><span class="o">-</span><span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span>
</pre></div>
</div>
<p><em>Debian/Ubuntu</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="n">perfsonar</span><span class="o">-</span><span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="running-psconfig-grafana-agent">
<span id="psconfig-grafana-agent-run"></span><h2>Running <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code><a class="headerlink" href="#running-psconfig-grafana-agent" title="Permalink to this headline">¶</a></h2>
<div class="section" id="starting-psconfig-grafana-agent">
<span id="psconfig-grafana-agent-run-start"></span><h3>Starting <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code><a class="headerlink" href="#starting-psconfig-grafana-agent" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">start</span> <span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="n">agent</span>
</pre></div>
</div>
</div>
<div class="section" id="stopping-psconfig-grafana-agent">
<span id="psconfig-grafana-agent-run-stop"></span><h3>Stopping <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code><a class="headerlink" href="#stopping-psconfig-grafana-agent" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">stop</span> <span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="n">agent</span>
</pre></div>
</div>
</div>
<div class="section" id="restarting-psconfig-grafana-agent">
<span id="psconfig-grafana-agent-run-restart"></span><h3>Restarting <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code><a class="headerlink" href="#restarting-psconfig-grafana-agent" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="n">agent</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-the-status-of-psconfig-grafana-agent">
<span id="psconfig-grafana-agent-run-status"></span><h3>Checking the status of <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code><a class="headerlink" href="#checking-the-status-of-psconfig-grafana-agent" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">status</span> <span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="n">agent</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-templates">
<span id="psconfig-grafana-agent-templates"></span><h2>Configuring Templates<a class="headerlink" href="#configuring-templates" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuration-basics">
<span id="psconfig-grafana-agent-templates-basics"></span><h3>Configuration Basics<a class="headerlink" href="#configuration-basics" title="Permalink to this headline">¶</a></h3>
<p>In order for the agent to configure Grafana, it must first be configured to read one or more templates. There are multiple ways to add a template depending on its location relative to the host system of the agent. These include:</p>
<ol class="arabic simple">
<li><p>Configuring <em>remote</em> templates  by supplying a URL and desired options to the agent. This is most commonly done using the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command. See <a class="reference internal" href="#psconfig-grafana-agent-templates-remote"><span class="std std-ref">Remote Templates</span></a> for details.</p></li>
<li><p>Configuring <em>local</em> templates that live on the agent’s filesystem either using the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command or by copying the template files to a dedicated directory whose contents are automatically read by the agent. See <a class="reference internal" href="#psconfig-grafana-agent-templates-local"><span class="std std-ref">Local Templates</span></a> for details.</p></li>
</ol>
</div>
<div class="section" id="remote-templates">
<span id="psconfig-grafana-agent-templates-remote"></span><h3>Remote Templates<a class="headerlink" href="#remote-templates" title="Permalink to this headline">¶</a></h3>
<p>The primary way to add, list, and delete the remote templates read by the agent is with the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command simply edits the <code class="docutils literal notranslate"><span class="pre">/etc/perfsonar/psconfig/grafana-agent.json</span></code> file. For most users it is recommended to use the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command as opposed to editing the file directly as it is less prone to syntax errors.</p>
</div>
<p>As an example let’s say we have a pSConfig template at the URL <code class="docutils literal notranslate"><span class="pre">https://10.0.0.1/example.json</span></code>. The agent can be configured to read the template by running the following command <strong>as a root user</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psconfig</span> <span class="n">remote</span> <span class="n">add</span> <span class="s2">&quot;https://10.0.0.1/example.json&quot;</span>
</pre></div>
</div>
<p>The above command will add the new template to the agent. The agent should begin reading the template within 60 seconds of the change if using default settings (i.e. no agent restart required).</p>
<p>You may also provide the command with additional processing instructions. To see the full set of options available run the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psconfig</span> <span class="n">remote</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unlike the <a class="reference internal" href="psconfig_pscheduler_agent.html"><span class="doc">pSConfig pScheduler Agent</span></a>, the Grafana agent will use archive definitions from templates with no extra options like <code class="docutils literal notranslate"><span class="pre">--configure-archives</span></code>. This is because Grafana ultimately just uses the archives for <em>reading</em> data as opposed to <em>writing</em> results. Also, the agent would not be particularly useful otherwise since you cannot display results if you do not have them.</p>
</div>
<p>In addition to adding remote templates, you may also view them. The following command lists the remote templates in use by the agent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psconfig</span> <span class="n">remote</span> <span class="nb">list</span>
</pre></div>
</div>
<p>The above command returns a list of JSON objects containing the template URL and any options set.</p>
<p>Finally, to remove our example remote template we can run the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span> <span class="pre">delete</span></code> command <strong>as a root user</strong> as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psconfig</span> <span class="n">remote</span> <span class="n">delete</span> <span class="s2">&quot;https://10.0.0.1/example.json&quot;</span>
</pre></div>
</div>
<p>The command accepts only a URL and will remove the agent’s pointer to that template. Within 60 seconds of executing that command, the agent will run and instruct Grafana to cease display of any tasks from the removed template.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command is also the command used by the <a class="reference internal" href="psconfig_pscheduler_agent.html"><span class="doc">pScheduler agent</span></a> to manage remote templates. If you have both agents installed on the same system, then any <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command will affect both agents by default. If you’d only like a command to apply to the Grafana agent then add the <code class="docutils literal notranslate"><span class="pre">--agent</span> <span class="pre">grafana</span></code> option. Run <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span> <span class="pre">--help</span></code> for full details.</p>
</div>
</div>
<div class="section" id="local-templates">
<span id="psconfig-grafana-agent-templates-local"></span><h3>Local Templates<a class="headerlink" href="#local-templates" title="Permalink to this headline">¶</a></h3>
<p>The agent can read templates from the local filesystem. One way to do this is by giving the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command either a URL beginning with <code class="docutils literal notranslate"><span class="pre">file://</span></code> or an absolute path to the file on the filesystem. An example command is below where <code class="docutils literal notranslate"><span class="pre">/path/to/template.json</span></code> is the example path to the template file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psconfig</span> <span class="n">remote</span> <span class="n">add</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">template</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Everything about the command works the same with a file path as it would with a http/https URL. See <a class="reference internal" href="#psconfig-grafana-agent-templates-remote"><span class="std std-ref">Remote Templates</span></a> for more details on this command.</p>
<p>A second way you can add a local template is to copy it into the <em>template include directory</em>. By default this is located at <code class="docutils literal notranslate"><span class="pre">/etc/perfsonar/psconfig/grafana.d/</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">template</span><span class="o">.</span><span class="n">json</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">/</span><span class="n">psconfig</span><span class="o">/</span><span class="n">grafana</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">template</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Any file ending with <code class="docutils literal notranslate"><span class="pre">.json</span></code> in this directory will get read by the agent automatically. Some important notes about including files in this manner:</p>
<ul class="simple">
<li><p>Adding a new file, removing a file or updating a file within the template include directory will get detected automatically by the agent within 60 seconds of the change (i.e. no need to restart the agent).</p></li>
<li><p>Files are read every 60 minutes regardless of changes when the agent checks on the state of the dashboards it has created in Grafana.</p></li>
<li><p>The agent will follow symlinks if you use those instead of copying the file directly, though it may affect the agent’s ability to detect changes (i.e. you may have to wait up to 60 minutes for the agent to see the changes).</p></li>
<li><p>The agent ignores any files that do not end in <code class="docutils literal notranslate"><span class="pre">.json</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="modifying-templates">
<span id="psconfig-grafana-agent-modify"></span><h2>Modifying Templates<a class="headerlink" href="#modifying-templates" title="Permalink to this headline">¶</a></h2>
<p>Template modification in the Grafana agent works exactly the same as in the pScheduler agent. They both use the same commands and directories to perform these operations. See <a class="reference internal" href="psconfig_pscheduler_agent.html#psconfig-pscheduler-agent-modify"><span class="std std-ref">Modifying Templates</span></a> in the pScheduler agent document for full details.</p>
</div>
<div class="section" id="configuring-displays-and-grafana">
<span id="psconfig-grafana-agent-displays"></span><h2>Configuring Displays and Grafana<a class="headerlink" href="#configuring-displays-and-grafana" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adjusting-thresholds-and-other-parameters">
<span id="psconfig-grafana-agent-displays-thresholds"></span><h3>Adjusting Thresholds and Other Parameters<a class="headerlink" href="#adjusting-thresholds-and-other-parameters" title="Permalink to this headline">¶</a></h3>
<p>If you would like to edit the threshold values or colors displayed on grids generated by the agent, then you can edit settings in the <cite>/etc/perfsonar/psconfig/grafana-agent.json</cite> file. In the file there is a <cite>displays</cite> sections which has entries for the different types of tests (e.g. throughput, packet loss, etc). Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;displays&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="s2">&quot;throughput_avg&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;task_selector&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;test_types&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;throughput&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;datasource_selector&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stat_field&quot;</span><span class="p">:</span> <span class="s2">&quot;result.throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stat_type&quot;</span><span class="p">:</span> <span class="s2">&quot;avg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;row_field&quot;</span><span class="p">:</span> <span class="s2">&quot;test.spec.source.keyword&quot;</span><span class="p">,</span>
        <span class="s2">&quot;col_field&quot;</span><span class="p">:</span> <span class="s2">&quot;test.spec.dest.keyword&quot;</span><span class="p">,</span>
        <span class="s2">&quot;value_field&quot;</span><span class="p">:</span> <span class="s2">&quot;Average&quot;</span><span class="p">,</span>
        <span class="s2">&quot;value_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;bps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_template&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/lib/perfsonar/psconfig/templates/endpoints.json.j2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_var1&quot;</span><span class="p">:</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_var2&quot;</span><span class="p">:</span> <span class="s2">&quot;dest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;thresholds&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">null</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;super-light-yellow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2000000000</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">5000000000</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Under the <cite>thresholds`</cite> section each entry has a color and a value. The color can be a human-readable name that grafana understands or a hex value. The value is the threshold to set and the units will depend on the test type. For throughput this is bits per second. There should also be a <cite>unit`</cite> value which can help inform you if you are unsure.</p>
<p>In more advanced cases if we want to have different grids of the same type to have different thresholds (and display only once) then we can copy the existing config and create a second entry that updates the <cite>task_selector</cite>, <cite>thresholds</cite> and adds a <cite>priority</cite> (to both the new and original) as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="s2">&quot;displays&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="s2">&quot;throughput_avg&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;task_selector&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;test_types&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;throughput&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="s2">&quot;throughput&quot;</span><span class="p">,</span>
            <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;datasource_selector&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stat_field&quot;</span><span class="p">:</span> <span class="s2">&quot;result.throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stat_type&quot;</span><span class="p">:</span> <span class="s2">&quot;avg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;row_field&quot;</span><span class="p">:</span> <span class="s2">&quot;test.spec.source.keyword&quot;</span><span class="p">,</span>
        <span class="s2">&quot;col_field&quot;</span><span class="p">:</span> <span class="s2">&quot;test.spec.dest.keyword&quot;</span><span class="p">,</span>
        <span class="s2">&quot;value_field&quot;</span><span class="p">:</span> <span class="s2">&quot;Average&quot;</span><span class="p">,</span>
        <span class="s2">&quot;value_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;bps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_template&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/lib/perfsonar/psconfig/templates/endpoints.json.j2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_var1&quot;</span><span class="p">:</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_var2&quot;</span><span class="p">:</span> <span class="s2">&quot;dest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;thresholds&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">null</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;super-light-yellow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2000000000</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">5000000000</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>

    <span class="s2">&quot;throughput_avg_special_tests&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;task_selector&quot;</span><span class="p">:{</span>
            <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;super_special_test&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="s2">&quot;throughput&quot;</span><span class="p">,</span>
            <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">},</span>
        <span class="s2">&quot;datasource_selector&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stat_field&quot;</span><span class="p">:</span> <span class="s2">&quot;result.throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stat_type&quot;</span><span class="p">:</span> <span class="s2">&quot;avg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;row_field&quot;</span><span class="p">:</span> <span class="s2">&quot;test.spec.source.keyword&quot;</span><span class="p">,</span>
        <span class="s2">&quot;col_field&quot;</span><span class="p">:</span> <span class="s2">&quot;test.spec.dest.keyword&quot;</span><span class="p">,</span>
        <span class="s2">&quot;value_field&quot;</span><span class="p">:</span> <span class="s2">&quot;Average&quot;</span><span class="p">,</span>
        <span class="s2">&quot;value_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;bps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_template&quot;</span><span class="p">:</span> <span class="s2">&quot;/usr/lib/perfsonar/psconfig/templates/endpoints.json.j2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_var1&quot;</span><span class="p">:</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span>
        <span class="s2">&quot;matrix_url_var2&quot;</span><span class="p">:</span> <span class="s2">&quot;dest&quot;</span><span class="p">,</span>
        <span class="s2">&quot;thresholds&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">null</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;super-light-yellow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">10000000000</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">50000000000</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since technically <cite>super_special_test</cite> would match both because its both a throughput test and has the name <cite>super_special_test</cite> we use priority to indicate that the name match has precedence. If we did not add that, we would get two grids displayed for super_special_test with different thresholds.</p>
<p>Beyond changing thredholds, the default displays may be fine in most cases but you can add more entries to the displays section for different test types or have it grab different stats. Feel free to experiment with the different fields to learn more.</p>
</div>
<div class="section" id="organizing-grids-and-dashboards">
<span id="psconfig-grafana-agent-org-dashboards"></span><h3>Organizing Grids and Dashboards<a class="headerlink" href="#organizing-grids-and-dashboards" title="Permalink to this headline">¶</a></h3>
<p>Grouping grids onto the same dashboard can be controlled through your pSConfig JSON template under the <cite>tasks</cite> section. There are two values that need to be set under the task <cite>reference</cite> section:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Set the <cite>display-task-name</cite> to get a human readable title for the task</p></li>
<li><p>Set the <cite>display-task-group</cite> to a list of dashboard names in which you want the grid included (NOTE: This must be an array even if it is just one element)</p></li>
</ol>
</div></blockquote>
<p>See the snippet below that includes a grid displayed as <em>Example Throughput</em> in a dashboard named <em>Example Dashboard</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;example_throughput&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;display-set-source&quot;</span><span class="p">:</span> <span class="s2">&quot;{% jq .addresses[0]._meta.</span><span class="se">\&quot;</span><span class="s2">display-set</span><span class="se">\&quot;</span><span class="s2"> %}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display-set-dest&quot;</span><span class="p">:</span> <span class="s2">&quot;{% jq .addresses[1]._meta.</span><span class="se">\&quot;</span><span class="s2">display-set</span><span class="se">\&quot;</span><span class="s2"> %}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display-task-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Example Throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display-task-group&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Example Dashboard&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;group&quot;</span> <span class="p">:</span> <span class="s2">&quot;example_thr_group&quot;</span><span class="p">,</span>
    <span class="s2">&quot;schedule&quot;</span> <span class="p">:</span> <span class="s2">&quot;schedule_0&quot;</span>
    <span class="s2">&quot;test&quot;</span> <span class="p">:</span> <span class="s2">&quot;example_thr_test&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="graphing-multiple-interfaces-on-same-dashboard">
<span id="psconfig-grafana-agent-multi-xfaces"></span><h3>Graphing Multiple Interfaces on Same Dashboard<a class="headerlink" href="#graphing-multiple-interfaces-on-same-dashboard" title="Permalink to this headline">¶</a></h3>
<p>A common use case is that a single measurement host may have multiple interfaces, such as one dedicated to throughput and another dedicated to latency. The address for each interface is defined as separate <cite>address</cite> objects in your pSConfig file. By default, when the Grafana dashboards are generated these addresses will not be on the same graphs since the agent does not know they belong together. If you want this data to be on the same graph page you need to set some parameters that indicate the addresses should be grouped together. This requires two changes to your pSConfig template:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Update the <cite>address</cite> definitions with a <cite>_meta</cite> tag of <cite>display-set</cite>.</p></li>
<li><p>Update the <cite>task</cite> definitions to include a <cite>reference</cite> section with <cite>display-set-source</cite> and <cite>display-set-dest</cite> that includes the <cite>dispay-set</cite> value from the source and destination.</p></li>
</ol>
</div></blockquote>
<p>Let’s look at these steps in detail. First let’s say we have a host two interfaces: <em>example-tp.perfsonar.net</em> and <em>example-lat.perfsonar.net</em> that we want shown on the same graphs. When we define the addresses, we create a <cite>display-set</cite> called <cite>example.perfsonar.net</cite> (this can be any string as long as it is consistent between the two addresses) in our pSConfig template JSON. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="s2">&quot;example-tp.perfsonar.net&quot;</span> <span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;_meta&quot;</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;display-set&quot;</span> <span class="p">:</span> <span class="s2">&quot;example.perfsonar.net&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;example-tp.perfsonar.net&quot;</span>
<span class="p">},</span>
<span class="s2">&quot;example-lat.perfsonar.net&quot;</span> <span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;_meta&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;display-set&quot;</span> <span class="p">:</span> <span class="s2">&quot;example.perfsonar.net&quot;</span>
     <span class="p">},</span>
     <span class="s2">&quot;address&quot;</span> <span class="p">:</span> <span class="s2">&quot;example-lat.perfsonar.net&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>The next step is to make sure these values are passed to pScheduler when the tasks are created. This gives the agent enough information to build queries that can include results using both addresses on the graph. We do this by setting a <cite>display-set-source</cite> and <cite>display-set-dest</cite> in the <cite>reference</cite> section of the task. These use <cite>jq</cite> to dynamically set the values based on the source and destination. The task definition should look like the following and you can copy the definition of <cite>display-set-source</cite> and <cite>display-set-dest</cite> exactly to your template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="s2">&quot;example_throughput&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;display-set-source&quot;</span><span class="p">:</span> <span class="s2">&quot;{% jq .addresses[0]._meta.</span><span class="se">\&quot;</span><span class="s2">display-set</span><span class="se">\&quot;</span><span class="s2"> %}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display-set-dest&quot;</span><span class="p">:</span> <span class="s2">&quot;{% jq .addresses[1]._meta.</span><span class="se">\&quot;</span><span class="s2">display-set</span><span class="se">\&quot;</span><span class="s2"> %}&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display-task-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Example Throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display-task-group&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Example Dashboard&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;group&quot;</span> <span class="p">:</span> <span class="s2">&quot;example_thr_group&quot;</span><span class="p">,</span>
    <span class="s2">&quot;schedule&quot;</span> <span class="p">:</span> <span class="s2">&quot;schedule_0&quot;</span>
    <span class="s2">&quot;test&quot;</span> <span class="p">:</span> <span class="s2">&quot;example_thr_test&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-configuration">
<span id="psconfig-grafana-agent-advanced"></span><h3>Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">¶</a></h3>
<p>The primary configuration file for the agent lives in <code class="docutils literal notranslate"><span class="pre">/etc/perfsonar/psconfig/grafana-agent.json</span></code>. It provides a number of options for fine-tuning your agent. The best way to edit the file is with the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">agentctl</span></code> command. You can get a full list of options supported by the agent with the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>psconfig agentctl grafana ?
</pre></div>
</div>
<p>For full details on how to use the <cite>psconfig agentctl</cite> command to display, set, and unset properties run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psconfig</span> <span class="n">agentctl</span> <span class="o">--</span><span class="n">help</span><span class="p">:</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<span id="psconfig-grafana-agent-troubleshoot"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="looking-at-the-last-run-with-psconfig-stats-grafana">
<span id="psconfig-grafana-agent-troubleshoot-stats"></span><h3>Looking at the last run with <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">stats</span> <span class="pre">grafana</span></code><a class="headerlink" href="#looking-at-the-last-run-with-psconfig-stats-grafana" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>It’s often helpful to know</dt><dd><p>psconfig stats grafana</p>
</dd>
</dl>
<p>Below is an example of the successful output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Agent</span> <span class="n">Last</span> <span class="n">Run</span> <span class="n">Start</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">2018</span><span class="o">/</span><span class="mi">04</span><span class="o">/</span><span class="mi">25</span> <span class="mi">15</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mi">48</span>
<span class="n">Agent</span> <span class="n">Last</span> <span class="n">Run</span> <span class="n">End</span> <span class="n">Time</span><span class="p">:</span> <span class="mi">2018</span><span class="o">/</span><span class="mi">04</span><span class="o">/</span><span class="mi">25</span> <span class="mi">15</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mi">49</span>
<span class="n">Agent</span> <span class="n">Last</span> <span class="n">Run</span> <span class="n">Process</span> <span class="n">ID</span> <span class="p">(</span><span class="n">PID</span><span class="p">):</span> <span class="mi">3751</span>
<span class="n">Agent</span> <span class="n">Last</span> <span class="n">Run</span> <span class="n">Log</span> <span class="n">GUID</span><span class="p">:</span> <span class="n">BF30C416</span><span class="o">-</span><span class="mf">489E-11</span><span class="n">E8</span><span class="o">-</span><span class="mi">8</span><span class="n">BB6</span><span class="o">-</span><span class="mi">530</span><span class="n">A118410B6</span>
<span class="n">Total</span> <span class="n">grids</span> <span class="n">managed</span> <span class="n">by</span> <span class="n">agent</span><span class="p">:</span> <span class="mi">8</span>
<span class="n">From</span> <span class="n">include</span> <span class="n">files</span><span class="p">:</span> <span class="mi">5</span>
    <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">/</span><span class="n">psconfig</span><span class="o">/</span><span class="n">grafana</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">template</span><span class="o">.</span><span class="n">json</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">From</span> <span class="n">remote</span> <span class="n">definitions</span><span class="p">:</span> <span class="mi">3</span>
    <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="n">demo</span><span class="o">.</span><span class="n">json</span><span class="p">:</span> <span class="mi">3</span>
</pre></div>
</div>
<p>The output fields can be described as follows:</p>
<ul class="simple">
<li><p><strong>Agent Last Run Start Time</strong> is the time when the agent began its last complete run.</p></li>
<li><p><strong>Agent Last Run End Time</strong> is the time when the last complete run ended.</p></li>
<li><p><strong>Agent Last Run Process ID (PID)</strong> is the process ID of the agent at the time of its last complete run. This should only change if the agent is restarted.</p></li>
<li><p><strong>Agent Last Run Log GUID</strong> is a globally unique ID used to identify a run in the logs. You can grep the <a class="reference internal" href="#psconfig-grafana-agent-troubleshoot-logs"><span class="std std-ref">log file</span></a> with this ID to get the information about a specific run.</p></li>
<li><p><strong>Total grids managed by agent</strong> is the number of pSConfig <em>task</em> objects that match a grid configured by the agent from all input sources.</p></li>
<li><p><strong>From include files</strong> is the number of pSConfig <em>task</em> objects that match a grid configured by the agent that come from templates in the template include directory. Directly underneath that is a breakdown of the task count by the file from which they originate.</p></li>
<li><p><strong>From remote definitions</strong> is a count of the number of pSConfig <em>task</em> objects that match a grid configured by the agent that come from URLs added using the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">remote</span></code> command. Underneath is a breakdown of the task count by URL.</p></li>
</ul>
<p>This command is useful as a quick health check of the agent. It can answer questions like:</p>
<ul class="simple">
<li><p>When did my agent last run?</p></li>
<li><p>What templates is it using?</p></li>
<li><p>Is it building the expected set of grids?</p></li>
</ul>
<p>Also, if it throws an error that can be useful information too. In particular the output below is a good sign that your agent has never ran since it has not created the necessary log file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unable</span> <span class="n">to</span> <span class="nb">open</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="n">agent</span><span class="o">.</span><span class="n">log</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span>
</pre></div>
</div>
<p>This script may not give all the answers, but will hopefully get things started when debugging unexpected behavior of the agent.</p>
</div>
<div class="section" id="reading-the-logs">
<span id="psconfig-grafana-agent-troubleshoot-logs"></span><h3>Reading the Logs<a class="headerlink" href="#reading-the-logs" title="Permalink to this headline">¶</a></h3>
<p>If you need to debug beyond what the utilities above provide from the logs, then you can manually look at the log files. There us one primary log used by the agent:</p>
<blockquote>
<div><ul class="simple">
<li><p>The <strong>agent log</strong> lives at <code class="docutils literal notranslate"><span class="pre">/var/log/perfsonar/psconfig-grafana-agent.log</span></code> and tracks basic information about agent activity and any errors encountered.</p></li>
<li><p>The <strong>task log</strong> lives at <code class="docutils literal notranslate"><span class="pre">/var/log/perfsonar/psconfig-grafana-agent-tasks.log</span></code> and tracks the pScheduler tasks the agent tries to display. This log is useful if you need to look at how pSConfig is defining tasks it gives (or tries to give) to Grafana.</p></li>
<li><p>The <strong>transaction log</strong> lives at <code class="docutils literal notranslate"><span class="pre">/var/log/perfsonar/psconfig-grafana-agent-transactions.log</span></code> and logs each individual interaction with Grafana’s API.</p></li>
</ul>
</div></blockquote>
<p>The logs are designed to by parsable with fields in the form of <code class="docutils literal notranslate"><span class="pre">key=value</span></code> separated by whitespace. Every line has a <code class="docutils literal notranslate"><span class="pre">guid=</span></code> field with an ID unique to the run of an agent. As an example, the GUID can be used for filtering log lines with <code class="docutils literal notranslate"><span class="pre">grep</span></code> or similar tools.  It is often easiest to run the <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">stats</span> <span class="pre">grafana</span></code> <a class="reference internal" href="#psconfig-grafana-agent-troubleshoot-stats"><span class="std std-ref">command</span></a> to get the GUID of the last run as a launching point to parse the log. For example, looking at the example output from <a class="reference internal" href="#psconfig-grafana-agent-troubleshoot-stats"><span class="std std-ref">Looking at the last run with psconfig stats grafana</span></a>, the run had a GUID of <code class="docutils literal notranslate"><span class="pre">BF30C416-489E-11E8-8BB6-530A118410B6</span></code>. Knowing this GUID, all the log messages associated with that run can be queried using a command like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grep</span> <span class="s2">&quot;guid=BF30C416-489E-11E8-8BB6-530A118410B6&quot;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">/</span><span class="n">psconfig</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="n">agent</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>You can further filter that output if needed, and hopefully eventually find the information needed to solve any issues encountered.</p>
</div>
</div>
<div class="section" id="further-reading">
<span id="psconfig-grafana-agent-reading"></span><h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>For a full listing of pSConfig Grafana Agent related files see the reference <a class="reference internal" href="config_files.html#config-files-psconfig"><span class="std std-ref">here</span></a></p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <nav id="channelNav" class="channelNav">
                
                <ul>
<li><a class="reference internal" href="#">Running the pSConfig Grafana Agent</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#psconfig-grafana-agent-s-role">pSConfig Grafana Agent’s Role</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#installing-the-standalone-package">Installing the Standalone Package</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-psconfig-grafana-agent">Running <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code></a><ul>
<li><a class="reference internal" href="#starting-psconfig-grafana-agent">Starting <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code></a></li>
<li><a class="reference internal" href="#stopping-psconfig-grafana-agent">Stopping <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code></a></li>
<li><a class="reference internal" href="#restarting-psconfig-grafana-agent">Restarting <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code></a></li>
<li><a class="reference internal" href="#checking-the-status-of-psconfig-grafana-agent">Checking the status of <code class="docutils literal notranslate"><span class="pre">psconfig-grafana-agent</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-templates">Configuring Templates</a><ul>
<li><a class="reference internal" href="#configuration-basics">Configuration Basics</a></li>
<li><a class="reference internal" href="#remote-templates">Remote Templates</a></li>
<li><a class="reference internal" href="#local-templates">Local Templates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modifying-templates">Modifying Templates</a></li>
<li><a class="reference internal" href="#configuring-displays-and-grafana">Configuring Displays and Grafana</a><ul>
<li><a class="reference internal" href="#adjusting-thresholds-and-other-parameters">Adjusting Thresholds and Other Parameters</a></li>
<li><a class="reference internal" href="#organizing-grids-and-dashboards">Organizing Grids and Dashboards</a></li>
<li><a class="reference internal" href="#graphing-multiple-interfaces-on-same-dashboard">Graphing Multiple Interfaces on Same Dashboard</a></li>
<li><a class="reference internal" href="#advanced-configuration">Advanced Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#looking-at-the-last-run-with-psconfig-stats-grafana">Looking at the last run with <code class="docutils literal notranslate"><span class="pre">psconfig</span> <span class="pre">stats</span> <span class="pre">grafana</span></code></a></li>
<li><a class="reference internal" href="#reading-the-logs">Reading the Logs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#further-reading">Further Reading</a></li>
</ul>
</li>
</ul>

                <ul>
                  <li>
                  <a href="psconfig_pscheduler_agent.html">Previous topic</a>
                  <ul><li><a href="psconfig_pscheduler_agent.html" title="previous chapter">Running the pSConfig pScheduler Agent</a></li></ul>
                  </li>
                </ul>
                  <ul>
                      <li>
                      <a href="pwa.html">Next topic</a>
                      <ul><li><a href="pwa.html" title="next chapter">pSConfig Web Admin</a></li></ul>
                      </li>
                  </ul>
                
                
            </nav>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pwa.html" title="pSConfig Web Admin"
             >next</a> |</li>
        <li class="right" >
          <a href="psconfig_pscheduler_agent.html" title="Running the pSConfig pScheduler Agent"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">perfSONAR Toolkit 5.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <footer id="fat">
        <div class="footerContents">
            <nav id="fatFooterNav" class="fatFooterNav">
                <ul id="menu-partners" class="menu depth-0">
                    <li id="footer-partner-text" class="partner-menu">
                        perfSONAR 
                        <br>
                        partners 
                        <br>
                        include: 
                    </li>
    
                <li id="footer-partner-esnet" class="partner-menu">
                    <a href="http://www.es.net/" title="Visit DOE's Energy Sciences Network"><img src="_static/ESnet-ps.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-geant" class="partner-menu">
                    <a href="http://www.geant.org/" title="Visit GEANT"><img src="_static/geant-ps.png" alt="" style="border:none;"/></a> </li>
        
                <li id="footer-partner-iu" class="partner-menu">
                    <a href="http://www.iu.edu/" title="Visit Indiana University"><img src="_static/IU-ps.png" alt="" style="border:none;"></a> </li>

                <li id="footer-partner-i2" class="partner-menu">
                    <a href="http://www.internet2.edu/" title="Visit Internet2"><img src="_static/I2-ps.png" alt="" style="border:none;"></a> </li>
					
				<li id="footer-partner-rnp" class="partner-menu">
                    <a href="https://www.rnp.br/en" title="Visit RNP"><img src="_static/rnp.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-um" class="partner-menu">
                    <a href="http://www.umich.edu/" title="Visit University of Michigan"><img src="_static/UM-ps.png" alt="" style="border:none;"></a> </li>

                </ul>

            </nav>
            <nav id="minFooterNav" class="minFooterNav">
                <span class="copyright">PERFormance Service Oriented Network monitoring ARchitecture </span>
            </nav>
          
        </div> <!-- /footerContents -->
    </footer>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2024, perfSONAR Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>