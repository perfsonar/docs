*****************
Configs
*****************

Once you define your Host Groups and Test Specs, you can now define a Config by combining those entities.


Listing/editing Configs
----------------------------------

Under the "Config" section, you will see a list of Configs defined and their basic information. The links displayed next to the Config name is the actual Config URLs that users can download and subscribe on various perfSONAR services. To edit, or see more detail for each Config, click on the Config name in the Configs column.

.. image:: images/pwa/configs_sub.png

Adding Configs
----------------------------------

Start adding a new Config by clicking the large "+" sign ("Add New") at the bottom of the page.

.. image:: images/pwa/newconfig.png

Config Parameters
----------------------------------

When adding or editing a Config, these parameters are available.

* URL: Trailing URL for this Config. For example, if you enter ``foo``, you will be able to download this Config via ``http://<hostname>/pwa/pub/config/foo``

* Config Name: Name of the Config; also used as description for the Config.

* Admins: List of users can edit this Config.

* Central MA URLs: Providing Measurement Archive (MA) URLs (one per line) will allow you to send test results for all tests in the Config to one or more central MAs. Results from all tests conducted for in this Config will be sent to these central MAs.

* Force Endpoint MAs: Enabling this option will force the all test results to be stored in the individual MA for each host. This is useful if you don't have a central MA, or if you need to store at each endpoint for some other reason.

Each Config can contains more than 1 test. To add a new test, click "Add New Test" button.

.. image:: images/pwa/newtest.png

Enter a name for this test and select the desired Service Type and Topology. In most cases, "Mesh" will be the best choice. See `pSConfig Groups <psconfig_templates_intro#groups>`_ for more detail on topologies.

Once you select the Service Type and Topology, you can now select Host Group(s) and Testspec. PWA shows members of the Host Group you have selected as shown below.

.. image:: images/pwa/testpopulated.png

Don't forget to scroll down and select the Testspec, and optionally set any "No Agent Hosts" -- these are hosts that will not initiate tests, they will only participate in tests initiated by other hosts. If in doubt, leave this blank.

.. image:: images/pwa/testpopulated2.png

After you're done adding tests, please be sure click "Create" or "Update" at the top of the page to save your changes.

You should now able to browse generated Config via the link shown on the Configs list page.

.. image:: images/pwa/configurl.png

The output should look something like this:

.. image:: images/pwa/configjson.png

If you want to browse JSON files formatted in a human readable way, you can install the `JSONView <https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?utm_source=chrome-app-launcher-info-dialog>`_ extension for Chrome, or similar plugins for other browsers.


Auto Configs
----------------------------------

.. image:: images/pwa/autoconfig.png

Under "Configs" tab, you immediately see "Auto Config". Auto Config a special Config which is generated by aggregating all tests defined in various Configs for a specific host. Auto Config is useful if you want to configure a toolkit instance so that it will run all tests defined by any Configs it is a member of, rather than picking a specific Config.

To generate Auto config, simply choose a hostname from the hostname dropdown list.

Here is an example of Auto Config URL:

``http://<pwahostname>/pwa/pub/auto/<endpointhostname>``

You can modify the trailing hostname to create a different auto-URL.

Listing all configs
----------------------------------

You can also list all configs available by visiting the following URL:

``http://<pwahostname>/pwa/pub/config``
