<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation on Debian &mdash; perfSONAR Toolkit 4.0rc3 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/perfsonar.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.0rc3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="perfSONAR Toolkit 4.0rc3 documentation" href="index.html" />
    <link rel="next" title="perfSONAR on Low Cost Nodes" href="install_low_cost_nodes.html" />
    <link rel="prev" title="Installation on CentOS" href="install_centos.html" /> 
  </head>
  <body role="document">
    <header>
        <div class="headerContents">
          <a href="index.html" border="0"><img src="_static/perfSONAR-header.gif"></a>
          <div class="acctSearchContainer">
              <section id="searchBox" class="searchBox">
                  <!--Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
                  <!--The terms of service are available at http://www.google.com/cse/docs/tos.html -->
                  <form action="search.html" id="cse-search-box" method="get">
                    <input type="text" name="q" size="25" class="searchInput" placeholder="Search"/>
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                  </form>
              </section>
         </div>
        </div>
    </header>
    <div style="display:block;clear:both;">
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install_low_cost_nodes.html" title="perfSONAR on Low Cost Nodes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install_centos.html" title="Installation on CentOS"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">perfSONAR Toolkit 4.0rc3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-on-debian">
<h1>Installation on Debian<a class="headerlink" href="#installation-on-debian" title="Permalink to this headline">¶</a></h1>
<p>perfSONAR combines various sets of measurement tools and services. For perfSONAR 4.0 we provide the whole perfSONAR toolkit as Debian packages for four different architectures.  This should enable you to deploy a full perfSONAR node on one of the following distributions:</p>
<ul class="simple">
<li>Debian 7 Wheezy</li>
<li>Debian 8 Jessie</li>
<li>Ubuntu 14 Trusty</li>
</ul>
<p>Debian meta packages are available to install the bundles described in <a class="reference internal" href="install_options.html"><em>perfSONAR Installation Options</em></a>. Here are some instructions to get you started with the perfSONAR toolkit on Debian hosts.</p>
<div class="section" id="system-requirements">
<h2>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Hardware:</strong> We provide Debian packages for 5 different architectures:<ul>
<li>32-bit (i386)</li>
<li>64-bit (amd64)</li>
<li>ARMv4t and up (armel)</li>
<li>ARMv7 and up (armhf)</li>
<li>ARM64 (arm64) (only for Debian 8)</li>
</ul>
</li>
<li><strong>Operating System:</strong>  Any system running a Debian 7, Debian 8, or Ubuntu 14 OS is supported.  Other Debian flavours derived from Debian 7 or 8 or Ubuntu 14 might work too but are not officially supported.</li>
</ul>
</div>
<div class="section" id="installation-instructions">
<h2>Installation Instructions<a class="headerlink" href="#installation-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-configure-apt">
<span id="install-debian-step1"></span><h3>Step 1: Configure APT<a class="headerlink" href="#step-1-configure-apt" title="Permalink to this headline">¶</a></h3>
<p>All you need to do is to configure the perfSONAR Debian repository source, along with our signing key, on your Debian/Ubuntu machine.  This can be done with the following commands for Debian 7 or Ubuntu 14:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd /etc/apt/sources.list.d/
wget http://downloads.perfsonar.net/debian/perfsonar-wheezy-release.list
wget -qO - http://downloads.perfsonar.net/debian/perfsonar-debian-official.gpg.key | apt-key add -
</pre></div>
</div>
<p>Or with the following commands for Debian 8:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd /etc/apt/sources.list.d/
wget http://downloads.perfsonar.net/debian/perfsonar-jessie-release.list
wget -qO - http://downloads.perfsonar.net/debian/perfsonar-debian-official.gpg.key | apt-key add -
</pre></div>
</div>
<p>Then refresh the packages list:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>apt-get update
</pre></div>
</div>
</div>
<div class="section" id="step-2-install-the-packages">
<span id="install-debian-step2"></span><h3>Step 2: Install the packages<a class="headerlink" href="#step-2-install-the-packages" title="Permalink to this headline">¶</a></h3>
<p>You&#8217;re now ready to choose which bundle, as describe in <a class="reference internal" href="install_options.html"><em>perfSONAR Installation Options</em></a>, you want to install on your Debian/Ubuntu host.</p>
<ul class="simple">
<li><strong>perfsonar-tools</strong></li>
<li><strong>perfsonar-testpoint</strong> (which contains perfsonar-tools and the meshconfig-agent to participate in a test mesh, see <a class="reference internal" href="multi_mesh_agent_config.html"><em>Reading a Central Configuration File</em></a> for more details)</li>
<li><strong>perfsonar-core</strong> (which contains perfsonar-testpoint)</li>
<li><strong>perfsonar-toolkit</strong> (the full perfSONAR toolkit, containing perfsonar-core)</li>
<li><strong>perfsonar-centralmanagement</strong> (to host a central MA and a dashboard)</li>
</ul>
<p>Choose the bundle you want to install and call <code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span></code> with it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>apt-get install perfsonar-testpoint
</pre></div>
</div>
<p><em>Optional Packages</em></p>
<p>Additionally, if not installing the perfsonar-toolkit bundle, you may also install the toolkit security, sysctl and ntp configuration packages manually:</p>
<blockquote>
<div><ul class="simple">
<li><strong>perfsonar-toolkit-security</strong> containing iptables rules and fail2ban to protect your node, see <a class="reference internal" href="manage_security.html"><em>Firewalls and Security Software</em></a> for more details.</li>
<li><strong>perfsonar-toolkit-sysctl</strong> fine tuning your host for better performance measurements, see <a class="reference internal" href="manage_tuning.html"><em>Host Tuning</em></a> for more details.</li>
<li><strong>perfsonar-toolkit-ntp</strong> provides you with a list of known NTP servers and a script to choose the closest ones.</li>
</ul>
</div></blockquote>
<p>The installation of these packages can be done with each of the commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>apt-get install perfsonar-toolkit-security
apt-get install perfsonar-toolkit-sysctl
apt-get install perfsonar-toolkit-ntp
</pre></div>
</div>
<p>During the installation of the <code class="docutils literal"><span class="pre">perfsonar-toolkit-security</span></code> package you&#8217;ll be asked if you want to keep your current set of iptables rules, both for IPV4 and for IPv6. This is part of the usual installation process of the <code class="docutils literal"><span class="pre">iptables-persistent</span></code> package that we use to setup the firewall protecting your perfSONAR node.  Whatever you answer to the question, your current rules will be saved as part of the <code class="docutils literal"><span class="pre">perfsonar-toolkit-security</span></code> package installation.</p>
</div>
<div class="section" id="step-3-verify-ntp-and-tuning-parameters">
<span id="install-debian-step3"></span><h3>Step 3: Verify NTP and Tuning Parameters<a class="headerlink" href="#step-3-verify-ntp-and-tuning-parameters" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>NTP</strong></p>
<p>After installing the <code class="docutils literal"><span class="pre">perfsonar-toolkit-ntp</span></code> package, you can run the following script to have perfSONAR choose the closest NTP servers for you:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>/usr/lib/perfsonar/scripts/configure_ntpd new
service ntp restart
</pre></div>
</div>
<p>You can also configure your own set of NTP servers manually.</p>
<p>The Network Time Protocol (NTP) is required by the tools in order to obtain accurate measurements. Some of the tools such as BWCTL will not even run unless NTP is configured. You can verify NTP is running with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ntpq</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>System Tuning</strong></p>
<p>It is important to make sure that your host is properly tuned for maximum TCP performance on the WAN. You should verify that htcp or cubic, not reno, is the default TCP congestion control algorithm, and that the maximum TCP buffers are big enough for your paths of interest.  If you have installed the <code class="docutils literal"><span class="pre">perfsonar-toolkit-sysctl</span></code> package, all should be ready for you.</p>
<p>Please refer to <a class="reference external" href="http://fasterdata.es.net/host-tuning/linux/">linux host tuning</a> for more information.</p>
</li>
</ul>
</div>
<div class="section" id="step-4-firewall-and-security-considerations">
<span id="install-debian-step4"></span><h3>Step 4: Firewall and Security Considerations<a class="headerlink" href="#step-4-firewall-and-security-considerations" title="Permalink to this headline">¶</a></h3>
<p>If you have installed the <cite>perfsonar-toolkit-security</cite> package, then your iptables are already configured with our default rules.  The package also installs fail2ban.</p>
<p>If you would like to configure the rules manually, then please review the <a class="reference external" href="http://www.perfsonar.net/deploy/security-considerations/">document here</a> on the ports that need to be open.</p>
<p>Additionally, bwctl allows you to limit the parameters of tests such as duration and bandwidth based on the requesters IP address. It does this through a file called bwctl-server.limits.
ESnet provides a file containing all R&amp;E subnets, which is updated nightly. Instructions on how to download this file and cofigure pScheduler and
bwctl to use it are described on the page <a class="reference internal" href="manage_limits.html"><em>Limiting Tests to R&amp;E Networks Only</em></a>.</p>
</div>
<div class="section" id="step-5-auto-updates">
<span id="install-debian-step5"></span><h3>Step 5: Auto updates<a class="headerlink" href="#step-5-auto-updates" title="Permalink to this headline">¶</a></h3>
<p>To ensure you always have the most current and hopefully most secure packages you can install and configure <code class="docutils literal"><span class="pre">cron-apt</span></code> to be run every night.  You’ll need to configure it to actually install the available updates and not just download the newly available packages (which is the default configuration).  This can be done with the following commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>apt-get install cron-apt
echo &#39;upgrade -y -o APT::Get::Show-Upgraded=true -o Dir::Etc::SourceList=/etc/apt/sources.list.d/perfsonar-wheezy-release.list -o Dir::Etc::SourceParts=&quot;/dev/null&quot;&#39; &gt;&gt; /etc/cron-apt/action.d/5-install
</pre></div>
</div>
<p>A cronjob will automatically install new packages present in the perfsonar-wheezy-release repository every night (check <code class="docutils literal"><span class="pre">/etc/cron.d/cron-apt</span></code>). You may want to do the same with the security updates provided by Debian/Ubuntu.</p>
<p>A trace of all updates applied will be stored in <code class="docutils literal"><span class="pre">/var/log/cron-apt/log</span></code></p>
<p>Full perfSONAR toolkit upgrades might still need a manual intervention to properly conclude, but we will then announce that through our usual communication channels.</p>
</div>
<div class="section" id="step-6-register-your-services">
<span id="install-debian-step6"></span><h3>Step 6: Register your services<a class="headerlink" href="#step-6-register-your-services" title="Permalink to this headline">¶</a></h3>
<p>In order to publish the existence of your measurement services there is a single file with some details about your host. You may edit this information by opening <strong>/etc/perfsonar/lsregistrationdaemon.conf</strong>. You will see numerous properties you may populate. They are commented out meaning you need to remove the <code class="docutils literal"><span class="pre">#</span></code> at the beginning of the line for them to take effect. However in most cases, the defaults of this file will be suitable and you should not need to make any changes. The auto-discovery directives indicate whether the system automatically determines the value of any property not manually set in this file. The properties you may additionally set are administrative data like for example administrator&#8217;s name, email, site_name, city, country, latitude, longitude, etc. None of them are required but it is highly recommended you set them since it will make finding your services easier for others. More information on the available fields can be found in <a class="reference internal" href="config_ls_registration.html"><em>Lookup Service Registration Daemon Configuration File</em></a>.</p>
<p>After configuring the registration daemon you need to start it using the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>/etc/init.d/perfsonar-registrationdaemon start
</pre></div>
</div>
</div>
<div class="section" id="step-7-starting-your-services">
<span id="install-debian-step7"></span><h3>Step 7: Starting your services<a class="headerlink" href="#step-7-starting-your-services" title="Permalink to this headline">¶</a></h3>
<p>You can start all the services by rebooting the host since all are configured to run by default. Otherwise you may start them with the following commands as a root user:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>/etc/init.d/bwctl-server start
/etc/init.d/owamp-server start
/etc/init.d/perfsonar-lsregistrationdaemon start
</pre></div>
</div>
<p>Note that you may have to wait a few hours for NTP to synchronize your clock before starting bwctl-server and owamp-server.</p>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuring-central-management">
<h3>Configuring Central Management<a class="headerlink" href="#configuring-central-management" title="Permalink to this headline">¶</a></h3>
<p>Refer to the documentation here: <a class="reference internal" href="multi_overview.html"><em>Central Configuration Overview</em></a></p>
</div>
<div class="section" id="configuring-through-the-web-interface">
<h3>Configuring through the web interface<a class="headerlink" href="#configuring-through-the-web-interface" title="Permalink to this headline">¶</a></h3>
<p>After installing the perfsonar-toolkit bundle, you can refer to the general perfSONAR configuration from <a class="reference internal" href="install_config_first_time.html"><em>Configuring the Toolkit for the First Time</em></a>.</p>
</div>
</div>
<div class="section" id="support">
<h2>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>Support for Debian installations is provided by the perfSONAR community through the usual communication channels.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <nav id="channelNav" class="channelNav">
                
                <ul>
<li><a class="reference internal" href="#">Installation on Debian</a><ul>
<li><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li><a class="reference internal" href="#installation-instructions">Installation Instructions</a><ul>
<li><a class="reference internal" href="#step-1-configure-apt">Step 1: Configure APT</a></li>
<li><a class="reference internal" href="#step-2-install-the-packages">Step 2: Install the packages</a></li>
<li><a class="reference internal" href="#step-3-verify-ntp-and-tuning-parameters">Step 3: Verify NTP and Tuning Parameters</a></li>
<li><a class="reference internal" href="#step-4-firewall-and-security-considerations">Step 4: Firewall and Security Considerations</a></li>
<li><a class="reference internal" href="#step-5-auto-updates">Step 5: Auto updates</a></li>
<li><a class="reference internal" href="#step-6-register-your-services">Step 6: Register your services</a></li>
<li><a class="reference internal" href="#step-7-starting-your-services">Step 7: Starting your services</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#configuring-central-management">Configuring Central Management</a></li>
<li><a class="reference internal" href="#configuring-through-the-web-interface">Configuring through the web interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#support">Support</a></li>
</ul>
</li>
</ul>

                <ul>
                  <li>
                  <a href="install_centos.html">Previous topic</a>
                  <ul><li><a href="install_centos.html" title="previous chapter">Installation on CentOS</a></li></ul>
                  </li>
                </ul>
                  <ul>
                      <li>
                      <a href="install_low_cost_nodes.html">Next topic</a>
                      <ul><li><a href="install_low_cost_nodes.html" title="next chapter">perfSONAR on Low Cost Nodes</a></li></ul>
                      </li>
                  </ul>
                
                
            </nav>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="install_low_cost_nodes.html" title="perfSONAR on Low Cost Nodes"
             >next</a> |</li>
        <li class="right" >
          <a href="install_centos.html" title="Installation on CentOS"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">perfSONAR Toolkit 4.0rc3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <footer id="fat">
        <div class="footerContents">
            <nav id="fatFooterNav" class="fatFooterNav">
                <ul id="menu-partners" class="menu depth-0">
                    <li id="footer-partner-text" class="partner-menu">
                        perfSONAR 
                        <br>
                        partners 
                        <br>
                        include: 
                    </li>
    
                <li id="footer-partner-esnet" class="partner-menu">
                    <a href="http://www.es.net/" title="Visit DOE's Energy Sciences Network"><img src="_static/ESnet-ps.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-geant" class="partner-menu">
                    <a href="http://www.geant.org/" title="Visit GEANT"><img src="_static/geant-ps.png" alt="" style="border:none;"/></a> </li>
        
                <li id="footer-partner-iu" class="partner-menu">
                    <a href="http://www.iu.edu/" title="Visit Indiana University"><img src="_static/IU-ps.png" alt="" style="border:none;"></a> </li>

                <li id="footer-partner-i2" class="partner-menu">
                    <a href="http://www.internet2.edu/" title="Visit Internet2"><img src="_static/I2-ps.png" alt="" style="border:none;"></a> </li>
    
                </ul>

             
            </nav>
            <nav id="minFooterNav" class="minFooterNav">
                <span class="copyright">PERFormance Service Oriented Network monitoring ARchitecture </span>
            </nav>
          
        </div> <!-- /footerContents -->
    </footer>
    
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, perfSONAR Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>