
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Bundle Installation on Debian &#8212; perfSONAR Toolkit 5.1.4 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/perfsonar.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using perfSONAR with Docker" href="install_docker.html" />
    <link rel="prev" title="Bundle Installation on RedHat Enterprise Linux Variants" href="install_el.html" />
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-52RNZ729B1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-52RNZ729B1');
	</script>
	 

  </head><body>
    <header>
        <div class="headerContents">
          <a href="index.html" border="0"><img src="_static/perfsonar-logo-black-full-100.png"></a>
          <div class="acctSearchContainer">
              <section id="searchBox" class="searchBox">
                  <!--Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
                  <!--The terms of service are available at http://www.google.com/cse/docs/tos.html -->
                  <form action="search.html" id="cse-search-box" method="get">
                    <input type="text" name="q" size="25" class="searchInput" placeholder="Search"/>
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                  </form>
              </section>
         </div>
        </div>
    </header>
    <div style="display:block;clear:both;">
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install_docker.html" title="Using perfSONAR with Docker"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install_el.html" title="Bundle Installation on RedHat Enterprise Linux Variants"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">perfSONAR Toolkit 5.1.4 documentation</a> &#187;</li> 
      </ul>
    </div>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="bundle-installation-on-debian">
<h1>Bundle Installation on Debian<a class="headerlink" href="#bundle-installation-on-debian" title="Permalink to this headline">¶</a></h1>
<p>perfSONAR combines various sets of measurement tools and services. We provide the whole perfSONAR Toolkit as Debian packages for four different architectures.  This should enable you to deploy a full perfSONAR node on one of the following distributions:</p>
<ul class="simple">
<li><p>Debian 11 Bullseye</p></li>
<li><p>Debian 12 Bookworm</p></li>
<li><p>Ubuntu 20 Focal Fossa</p></li>
<li><p>Ubuntu 22 Jammy Jellyfish</p></li>
</ul>
<p>Debian meta packages are available to install the bundles described in <a class="reference internal" href="install_options.html"><span class="doc">perfSONAR Installation Options</span></a>.</p>
<p>The remaining sections of this document detail the steps required for installing these bundles.</p>
<div class="section" id="system-requirements">
<h2>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Architecture:</strong> We provide Debian packages for 4 different architectures:</p>
<ul>
<li><p>64-bit (amd64)</p></li>
<li><p>ARMv7 and up (armhf)</p></li>
<li><p>ARM64 (arm64)</p></li>
<li><p>PPC64 (ppc64el)</p></li>
</ul>
</li>
<li><p><strong>Operating System:</strong>  Any system running a Debian 11 or 12, Ubuntu 20 or 22 server OS is supported.  Other Debian flavours derived from Debian 11 or 12, Ubuntu 20 or 22 might work too but are not officially supported.</p></li>
<li><p>See <a class="reference internal" href="install_hardware.html"><span class="doc">Hardware Requirements</span></a> for hardware requirements and more.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installing a graphical/desktop environment with perfSONAR is not supported.  These environments generally come with a Network Manager that conflicts with the way that perfSONAR is tuning the network interface parameters.  We recommend doing only server grade OS installs.</p>
</div>
</div>
<div class="section" id="installation-automated-script">
<span id="install-debian-installation-quick"></span><h2>Installation (Automated Script)<a class="headerlink" href="#installation-automated-script" title="Permalink to this headline">¶</a></h2>
<p>perfSONAR provides a script that will automatically perform the first two steps in <a class="reference internal" href="#install-debian-installation"><span class="std std-ref">Installation (Manual)</span></a>. You can install your choice of bundle with one of the commands below.</p>
<ul>
<li><p><strong>perfSONAR Tools</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">downloads</span><span class="o">.</span><span class="n">perfsonar</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">install</span> <span class="o">|</span> <span class="n">sh</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span> <span class="n">tools</span>
</pre></div>
</div>
</li>
<li><p><strong>perfSONAR Test Point</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">downloads</span><span class="o">.</span><span class="n">perfsonar</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">install</span> <span class="o">|</span> <span class="n">sh</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span> <span class="n">testpoint</span>
</pre></div>
</div>
</li>
<li><p><strong>perfSONAR Toolkit</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">downloads</span><span class="o">.</span><span class="n">perfsonar</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">install</span> <span class="o">|</span> <span class="n">sh</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span> <span class="n">toolkit</span>
</pre></div>
</div>
</li>
<li><p><strong>perfSONAR Archive</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">downloads</span><span class="o">.</span><span class="n">perfsonar</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">install</span> <span class="o">|</span> <span class="n">sh</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span> <span class="n">archive</span>
</pre></div>
</div>
</li>
</ul>
<p>If you would prefer to perform these steps manually see <a class="reference internal" href="#install-debian-step1"><span class="std std-ref">Step 1: Configure APT</span></a> and <a class="reference internal" href="#install-debian-step2"><span class="std std-ref">Step 2: Install a Bundle</span></a>.</p>
</div>
<div class="section" id="installation-manual">
<span id="install-debian-installation"></span><h2>Installation (Manual)<a class="headerlink" href="#installation-manual" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-configure-apt">
<span id="install-debian-step1"></span><h3>Step 1: Configure APT<a class="headerlink" href="#step-1-configure-apt" title="Permalink to this headline">¶</a></h3>
<p>All you need to do is to configure the perfSONAR Debian repository source, along with our signing key, on your Debian/Ubuntu machine. <strong>You will need to follow the steps below as privileged user</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">-</span><span class="n">release</span><span class="o">.</span><span class="n">list</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">downloads</span><span class="o">.</span><span class="n">perfsonar</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">debian</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">-</span><span class="n">release</span><span class="o">.</span><span class="n">list</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">trusted</span><span class="o">.</span><span class="n">gpg</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">-</span><span class="n">release</span><span class="o">.</span><span class="n">gpg</span><span class="o">.</span><span class="n">asc</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">downloads</span><span class="o">.</span><span class="n">perfsonar</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">debian</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">-</span><span class="n">release</span><span class="o">.</span><span class="n">gpg</span><span class="o">.</span><span class="n">key</span>
</pre></div>
</div>
<ul>
<li><p><strong>Ubuntu only</strong>. Additionnaly, if you’re running a stripped down Ubuntu installation, you might need to enable the universe repository.  This is done with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="n">universe</span>
</pre></div>
</div>
</li>
</ul>
<p>Then refresh the packages list so APT knows about the perfSONAR packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">update</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-install-a-bundle">
<span id="install-debian-step2"></span><h3>Step 2: Install a Bundle<a class="headerlink" href="#step-2-install-a-bundle" title="Permalink to this headline">¶</a></h3>
<p><strong>Choose one</strong> of the following bundles and see <a class="reference internal" href="install_options.html"><span class="doc">perfSONAR Installation Options</span></a> page for more information about what these bundles are.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bundles that install Opensearch must set <code class="docutils literal notranslate"><span class="pre">env</span> <span class="pre">OPENSEARCH_INITIAL_ADMIN_PASSWORD=perfSONAR123!</span></code>. This is a requirement of the Opensearch package. The password will be overwritten with a random password by the perfsonar-archive package, so use <code class="docutils literal notranslate"><span class="pre">perfSONAR123!</span></code> since it meets Opensearch character requirements and will ultimately be replaced with a better password by install process.</p>
</div>
<ul>
<li><p><strong>perfSONAR Tools</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="n">perfsonar</span><span class="o">-</span><span class="n">tools</span>
</pre></div>
</div>
</li>
<li><p><strong>perfSONAR Test Point</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="n">perfsonar</span><span class="o">-</span><span class="n">testpoint</span>
</pre></div>
</div>
<p>During the installation process, you’ll be asked to choose a password for the pscheduler database.</p>
</li>
<li><p><strong>perfSONAR Core</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>env OPENSEARCH_INITIAL_ADMIN_PASSWORD=perfSONAR123! apt install perfsonar-core
</pre></div>
</div>
<p>During the installation process, you’ll be asked to choose a password for the pscheduler database.</p>
</li>
<li><p><strong>perfSONAR Archive</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>env OPENSEARCH_INITIAL_ADMIN_PASSWORD=perfSONAR123! apt install perfsonar-archive
</pre></div>
</div>
<p>During the installation process, you’ll be asked to choose a password for the pscheduler database.</p>
</li>
<li><p><strong>perfSONAR Toolkit</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>env OPENSEARCH_INITIAL_ADMIN_PASSWORD=perfSONAR123! apt install perfsonar-toolkit
</pre></div>
</div>
<p>During the installation process, you’ll be asked to choose a password for the pscheduler database.</p>
</li>
</ul>
<div class="section" id="setting-the-default-user-password-in-postgresql">
<h4>Setting the default user password in PostgreSQL<a class="headerlink" href="#setting-the-default-user-password-in-postgresql" title="Permalink to this headline">¶</a></h4>
<p>With a regular <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span></code>, the user is prompted to enter a password for the new PostgreSQL database created during installation. You can choose this password arbitrarily or leave it empty (the DB is only accessible locally).
Alternatively, you can install packages with APT in non-interactive mode to avoid the password prompt by setting the following environment variable when installing: <code class="docutils literal notranslate"><span class="pre">DEBIAN_FRONTEND=noninteractive</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">perfsonar-toolkit</span></code></p>
</div>
<div class="section" id="optional-packages">
<h4>Optional Packages<a class="headerlink" href="#optional-packages" title="Permalink to this headline">¶</a></h4>
<p>In addition to any of the bundles above you may also <strong>optionally</strong> choose to install one or more of our add-on packages (these are automatically added on the perfsonar-toolkit bundle):</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">perfsonar-toolkit-ntp</span></code> - Automatically detects closest NTP servers and sets them in ntp.conf</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">perfsonar-toolkit-security</span></code> - Adds default firewall rules and installs fail2ban</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">perfsonar-toolkit-servicewatcher</span></code> - Adds a cron job that checks if services are still running</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">perfsonar-toolkit-sysctl</span></code> - Adds default sysctl tuning settings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">install</span> <span class="pre">perfsonar-toolkit-systemenv-testpoint</span></code> - Configures auto-update and set some default logging locations</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="reducing-installation-size">
<h4>Reducing installation size<a class="headerlink" href="#reducing-installation-size" title="Permalink to this headline">¶</a></h4>
<p>If you want to reduce the perfSONAR installation size as much as possible, you can call <code class="docutils literal notranslate"><span class="pre">apt</span></code> with the <code class="docutils literal notranslate"><span class="pre">--no-install-recommends</span></code> option.  This will prevent Debian recommended packages to be automatically installed (you can also configure this globaly in the APT configuration files with the statement <code class="docutils literal notranslate"><span class="pre">APT::Install-Recommends</span> <span class="pre">&quot;0&quot;;</span></code>).  This can become useful when you want to install the perfsonar-testpoint bundle with the less overhead possible.</p>
</div>
</div>
<div class="section" id="step-3-verify-ntp-and-tuning-parameters">
<span id="install-debian-step3"></span><h3>Step 3: Verify NTP and Tuning Parameters<a class="headerlink" href="#step-3-verify-ntp-and-tuning-parameters" title="Permalink to this headline">¶</a></h3>
<p><em>Step 3 can be ignored for perfsonar-toolkit package installation as its instructions are included and run automatically</em></p>
<ul>
<li><p><strong>NTP Tuning</strong></p>
<ul>
<li><p><strong>Auto-select NTP servers based on proximity</strong></p>
<p>The Network Time Protocol (NTP) is required by the tools in order to obtain accurate measurements. Some of the tools such as OWAMP will give correct results unless NTP is running. If the optional package <cite>perfsonar-toolkit-ntp</cite> was installed this has already been done for you, but if you want to re-run manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">configure_ntpd</span> <span class="n">new</span>
<span class="n">service</span> <span class="n">ntp</span> <span class="n">restart</span>
</pre></div>
</div>
</li>
</ul>
<p>You can also configure your own set of NTP servers if you want.</p>
<p>You can verify if NTP is running with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">ntpq</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
</li>
<li><p><strong>System Tuning</strong></p>
<p>It is important to make sure that your host is properly tuned for maximum TCP performance on the WAN. You should verify that htcp, not reno, is the default TCP congestion control algorithm, and that the maximum TCP buffers are big enough for your paths of interest.</p>
<p>If you have installed the <cite>perfsonar-toolkit-sysctl</cite> package, all should be ready for you, but if you want to rerun manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">configure_sysctl</span>
</pre></div>
</div>
<p>Please refer to <a class="reference external" href="http://fasterdata.es.net/host-tuning/linux/">linux host tuning</a> for more information.</p>
</li>
</ul>
</div>
<div class="section" id="step-4-firewall-and-security-considerations">
<span id="install-debian-step4"></span><h3>Step 4: Firewall and Security Considerations<a class="headerlink" href="#step-4-firewall-and-security-considerations" title="Permalink to this headline">¶</a></h3>
<p>If you have installed the <cite>perfsonar-toolkit-security</cite> package, then your iptables are already configured with our default rules.  The package also installs fail2ban.</p>
<p>If you would like to configure the rules manually, then please review the <a class="reference external" href="http://www.perfsonar.net/deploy/security-considerations/">document here</a> on the ports that need to be open.</p>
<blockquote>
<div><p>The <cite>perfsonar-toolkit-security</cite> package uses <cite>firewalld</cite> to manage the firewall rules.</p>
</div></blockquote>
<p>Additionally, pscheduler allows you to limit the parameters of tests such as duration and bandwidth based on the requesters IP address. It does this through the file <code class="docutils literal notranslate"><span class="pre">pscheduler/limits.conf</span></code>.
ESnet provides a file containing all R&amp;E subnets, which is updated nightly. Instructions on how to download this file and configure pScheduler to use it are described on the page <a class="reference internal" href="manage_limits.html"><span class="doc">Limiting Tests to R&amp;E Networks Only</span></a>.</p>
<p>Note that the <cite>perfsonar-toolkit-security</cite> package is automatically included in the <cite>perfsonar-toolkit</cite> bundle.</p>
</div>
<div class="section" id="step-5-auto-updates">
<span id="install-debian-step5"></span><h3>Step 5: Auto updates<a class="headerlink" href="#step-5-auto-updates" title="Permalink to this headline">¶</a></h3>
<p>If you have installed the <cite>perfsonar-toolkit-systemenv-testpoint</cite> package, then you’re all set for the auto-updates of perfSONAR packages and security fix for your OS.</p>
<p>To ensure you always have the most current and hopefully most secure packages you can install <code class="docutils literal notranslate"><span class="pre">unattended-upgrades</span></code>. You’ll need to configure it to actually install the available updates with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span>
<span class="n">echo</span> <span class="s1">&#39;APT::Periodic::Update-Package-Lists &quot;1&quot;;&#39;</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">apt</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="mi">60</span><span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span><span class="o">-</span><span class="n">perfsonar</span>
<span class="n">echo</span> <span class="s1">&#39;APT::Periodic::Unattended-Upgrade &quot;1&quot;;&#39;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">apt</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="mi">60</span><span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span><span class="o">-</span><span class="n">perfsonar</span>
<span class="n">echo</span> <span class="s1">&#39;APT::Periodic::AutocleanInterval &quot;31&quot;;&#39;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">apt</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="mi">60</span><span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span><span class="o">-</span><span class="n">perfsonar</span>
<span class="n">echo</span> <span class="s1">&#39;Unattended-Upgrade::Origins-Pattern:: &quot;origin=perfSONAR&quot;;&#39;</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">apt</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="mi">60</span><span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span><span class="o">-</span><span class="n">perfsonar</span>
</pre></div>
</div>
<p>A cronjob will automatically install security updates from Debian/Ubuntu and new packages present in the perfsonar release repository every night. A trace of all updates applied will be stored in <code class="docutils literal notranslate"><span class="pre">/var/log/unattended-upgrades/unattended-upgrades.log</span></code>.</p>
<p>Full perfSONAR toolkit upgrades (i.e. upgrade to new major versions) might still need a manual intervention to properly conclude, but we will then announce that through our usual communication channels.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Automatic updates are enabled by default in the perfSONAR Toolkit.</p>
</div>
</div>
<div class="section" id="step-6-service-watcher">
<span id="install-debian-step6"></span><h3>Step 6: Service Watcher<a class="headerlink" href="#step-6-service-watcher" title="Permalink to this headline">¶</a></h3>
<p>The <cite>perfsonar-toolkit-servicewatcher</cite> installs scripts that check if pscheduler, owamp, databases and other processes are running and restarts if they have stopped unexpectedly.</p>
<p>The install automatically configures cron to run the service_watcher regularly.</p>
<p>To run the script manually, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">perfsonar</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">service_watcher</span>
</pre></div>
</div>
</div>
<div class="section" id="step-7-register-your-services">
<span id="install-debian-step7"></span><h3>Step 7: Register your services<a class="headerlink" href="#step-7-register-your-services" title="Permalink to this headline">¶</a></h3>
<p>Note: this step can be done through the web interface if the perfsonar-toolkit bundle was installed. See <a class="reference internal" href="manage_admin_info.html"><span class="doc">Updating Administrative Information</span></a>.</p>
<p>No actual configuration is required but filling fields such as administrator_email, site_name, city, country, latitude, longitude, etc. are <strong>highly recommended</strong>. You can add these by removing the leading <cite>#</cite> of any property and filling it out with a proper value for your host. Changes will be picked-up automatically without need for any restarts.</p>
</div>
<div class="section" id="step-8-starting-your-services">
<span id="install-debian-step8"></span><h3>Step 8: Starting your services<a class="headerlink" href="#step-8-starting-your-services" title="Permalink to this headline">¶</a></h3>
<p>You can start all the services by rebooting the host since all are configured to run by default. In order to check services status issue the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">scheduler</span> <span class="n">status</span>
<span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">runner</span> <span class="n">status</span>
<span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">archiver</span> <span class="n">status</span>
<span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">ticker</span> <span class="n">status</span>
<span class="n">service</span> <span class="n">owamp</span><span class="o">-</span><span class="n">server</span> <span class="n">status</span>
<span class="n">service</span> <span class="n">perfsonar</span><span class="o">-</span><span class="n">lsregistrationdaemon</span> <span class="n">status</span>
</pre></div>
</div>
<p>If they are not running you may start them with appropriate service commands as a root user. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">scheduler</span> <span class="n">start</span>
<span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">runner</span> <span class="n">start</span>
<span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">archiver</span> <span class="n">start</span>
<span class="n">service</span> <span class="n">pscheduler</span><span class="o">-</span><span class="n">ticker</span> <span class="n">start</span>
<span class="n">service</span> <span class="n">owamp</span><span class="o">-</span><span class="n">server</span> <span class="n">start</span>
<span class="n">service</span> <span class="n">perfsonar</span><span class="o">-</span><span class="n">lsregistrationdaemon</span> <span class="n">start</span>
</pre></div>
</div>
<p>Note that you may have to wait a few hours for NTP to synchronize your clock before (re)starting owamp-server.</p>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuring-perfsonar-through-the-web-interface">
<h3>Configuring perfSONAR through the web interface<a class="headerlink" href="#configuring-perfsonar-through-the-web-interface" title="Permalink to this headline">¶</a></h3>
<p>After installing the perfsonar-toolkit bundle, you can refer to the general perfSONAR configuration from <a class="reference internal" href="install_config_first_time.html"><span class="doc">Configuring the Toolkit for the First Time</span></a>.</p>
</div>
</div>
<div class="section" id="upgrading-from-5-0-x">
<h2>Upgrading from 5.0.x<a class="headerlink" href="#upgrading-from-5-0-x" title="Permalink to this headline">¶</a></h2>
<p>If you had installed a perfSONAR 5.0.x bundle and you now want to upgrade to perfSONAR 5.1, you’ll have to follow the instructions here below.  This will only work for the OS version supported on both releases, i.e. Ubuntu 20.</p>
<div class="section" id="upgrade-the-perfsonar-installation">
<h3>Upgrade the perfSONAR installation<a class="headerlink" href="#upgrade-the-perfsonar-installation" title="Permalink to this headline">¶</a></h3>
<p>If you have auto-update enabled and already using the <code class="docutils literal notranslate"><span class="pre">perfsonar-release.list</span></code> APT source file (as was instructed when installing 5.0), you should receive the 5.1 upgrade automatically. However, because of some dependency changes and repository name change, the full upgrade need to be done manually.</p>
<p>If this is the case or you don’t use the auto-update feature, to upgrade your perfsonar installation, you need to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">update</span>
<span class="n">apt</span> <span class="n">dist</span><span class="o">-</span><span class="n">upgrade</span>
</pre></div>
</div>
<p>The measurements and the measurement archives that you already have defined in your 5.0.x installation will be migrated to the 5.1 toolkit automatically.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You might see <code class="docutils literal notranslate"><span class="pre">apt</span></code> issuing a warning about conflicting distribution with a message like <code class="docutils literal notranslate"><span class="pre">W:</span> <span class="pre">Conflicting</span> <span class="pre">distribution:</span> <span class="pre">https://downloads.perfsonar.net/debian</span> <span class="pre">perfsonar-release</span> <span class="pre">InRelease</span> <span class="pre">(expected</span> <span class="pre">perfsonar-5.0</span> <span class="pre">but</span> <span class="pre">got</span> <span class="pre">perfsonar-5.1)</span></code>  This is expected and can be ignored because you indeed are upgrading from 5.0 to 5.1.</p>
</div>
</div>
<div class="section" id="upgrade-to-another-bundle">
<h3>Upgrade to another bundle<a class="headerlink" href="#upgrade-to-another-bundle" title="Permalink to this headline">¶</a></h3>
<p>If you want to move from the <cite>perfsonar-testpoint</cite> bundle to another bundle that we provide for Debian, you can do so by following the instructions above from <a class="reference internal" href="#install-debian-step2"><span class="std std-ref">Step 2: Install a Bundle</span></a>.</p>
</div>
<div class="section" id="upgrade-from-ubuntu-20-to-ubuntu-22">
<h3>Upgrade from Ubuntu 20 to Ubuntu 22<a class="headerlink" href="#upgrade-from-ubuntu-20-to-ubuntu-22" title="Permalink to this headline">¶</a></h3>
<p>If you have a perfSONAR host running Ubuntu 20 and you want to upgrade it to 22, we recommend you to follow the following steps:</p>
<ul class="simple">
<li><p>Upgrade Ubuntu 20 to Ubuntu 22 (following official instructions, here are <a class="reference external" href="https://help.ubuntu.com/community/JammyUpgrades">Jammy Upgrades notes</a>)</p></li>
<li><p>Reboot your system unless already done in previous step.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">update;</span> <span class="pre">apt-get</span> <span class="pre">dist-upgrade</span></code> to get the latest version of perfSONAR.</p></li>
<li><p>Reboot your system one last time.</p></li>
</ul>
<p>Alternatively, do a fresh installation of perfSONAR on Ubuntu 22.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <nav id="channelNav" class="channelNav">
                
                <ul>
<li><a class="reference internal" href="#">Bundle Installation on Debian</a><ul>
<li><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li><a class="reference internal" href="#installation-automated-script">Installation (Automated Script)</a></li>
<li><a class="reference internal" href="#installation-manual">Installation (Manual)</a><ul>
<li><a class="reference internal" href="#step-1-configure-apt">Step 1: Configure APT</a></li>
<li><a class="reference internal" href="#step-2-install-a-bundle">Step 2: Install a Bundle</a><ul>
<li><a class="reference internal" href="#setting-the-default-user-password-in-postgresql">Setting the default user password in PostgreSQL</a></li>
<li><a class="reference internal" href="#optional-packages">Optional Packages</a></li>
<li><a class="reference internal" href="#reducing-installation-size">Reducing installation size</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-3-verify-ntp-and-tuning-parameters">Step 3: Verify NTP and Tuning Parameters</a></li>
<li><a class="reference internal" href="#step-4-firewall-and-security-considerations">Step 4: Firewall and Security Considerations</a></li>
<li><a class="reference internal" href="#step-5-auto-updates">Step 5: Auto updates</a></li>
<li><a class="reference internal" href="#step-6-service-watcher">Step 6: Service Watcher</a></li>
<li><a class="reference internal" href="#step-7-register-your-services">Step 7: Register your services</a></li>
<li><a class="reference internal" href="#step-8-starting-your-services">Step 8: Starting your services</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#configuring-perfsonar-through-the-web-interface">Configuring perfSONAR through the web interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-from-5-0-x">Upgrading from 5.0.x</a><ul>
<li><a class="reference internal" href="#upgrade-the-perfsonar-installation">Upgrade the perfSONAR installation</a></li>
<li><a class="reference internal" href="#upgrade-to-another-bundle">Upgrade to another bundle</a></li>
<li><a class="reference internal" href="#upgrade-from-ubuntu-20-to-ubuntu-22">Upgrade from Ubuntu 20 to Ubuntu 22</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                <ul>
                  <li>
                  <a href="install_el.html">Previous topic</a>
                  <ul><li><a href="install_el.html" title="previous chapter">Bundle Installation on RedHat Enterprise Linux Variants</a></li></ul>
                  </li>
                </ul>
                  <ul>
                      <li>
                      <a href="install_docker.html">Next topic</a>
                      <ul><li><a href="install_docker.html" title="next chapter">Using perfSONAR with Docker</a></li></ul>
                      </li>
                  </ul>
                
                
            </nav>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="install_docker.html" title="Using perfSONAR with Docker"
             >next</a> |</li>
        <li class="right" >
          <a href="install_el.html" title="Bundle Installation on RedHat Enterprise Linux Variants"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">perfSONAR Toolkit 5.1.4 documentation</a> &#187;</li> 
      </ul>
    </div>
    <footer id="fat">
        <div class="footerContents">
            <nav id="fatFooterNav" class="fatFooterNav">
                <ul id="menu-partners" class="menu depth-0">
                    <li id="footer-partner-text" class="partner-menu">
                        perfSONAR 
                        <br>
                        partners 
                        <br>
                        include: 
                    </li>
    
                <li id="footer-partner-esnet" class="partner-menu">
                    <a href="http://www.es.net/" title="Visit DOE's Energy Sciences Network"><img src="_static/ESnet-ps.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-geant" class="partner-menu">
                    <a href="http://www.geant.org/" title="Visit GEANT"><img src="_static/geant-ps.png" alt="" style="border:none;"/></a> </li>
        
                <li id="footer-partner-iu" class="partner-menu">
                    <a href="http://www.iu.edu/" title="Visit Indiana University"><img src="_static/IU-ps.png" alt="" style="border:none;"></a> </li>

                <li id="footer-partner-i2" class="partner-menu">
                    <a href="http://www.internet2.edu/" title="Visit Internet2"><img src="_static/I2-ps.png" alt="" style="border:none;"></a> </li>
					
				<li id="footer-partner-rnp" class="partner-menu">
                    <a href="https://www.rnp.br/en" title="Visit RNP"><img src="_static/rnp.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-um" class="partner-menu">
                    <a href="http://www.umich.edu/" title="Visit University of Michigan"><img src="_static/UM-ps.png" alt="" style="border:none;"></a> </li>

                </ul>

            </nav>
            <nav id="minFooterNav" class="minFooterNav">
                <span class="copyright">PERFormance Service Oriented Network monitoring ARchitecture </span>
            </nav>
          
        </div> <!-- /footerContents -->
    </footer>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, perfSONAR Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>