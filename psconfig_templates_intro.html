<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction to pSConfig Templates &mdash; perfSONAR Toolkit 4.1.4 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/perfsonar.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.1.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="perfSONAR Toolkit 4.1.4 documentation" href="index.html" />
    <link rel="next" title="Publishing a pSConfig Template" href="psconfig_publish.html" />
    <link rel="prev" title="pSConfig Quickstart Guide" href="psconfig_quickstart.html" /> 
  </head>
  <body>
    <header>
        <div class="headerContents">
          <a href="index.html" border="0"><img src="_static/perfSONAR-header.gif"></a>
          <div class="acctSearchContainer">
              <section id="searchBox" class="searchBox">
                  <!--Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
                  <!--The terms of service are available at http://www.google.com/cse/docs/tos.html -->
                  <form action="search.html" id="cse-search-box" method="get">
                    <input type="text" name="q" size="25" class="searchInput" placeholder="Search"/>
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                  </form>
              </section>
         </div>
        </div>
    </header>
    <div style="display:block;clear:both;">
    
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="psconfig_publish.html" title="Publishing a pSConfig Template"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="psconfig_quickstart.html" title="pSConfig Quickstart Guide"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">perfSONAR Toolkit 4.1.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="introduction-to-psconfig-templates">
<h1>Introduction to pSConfig Templates<a class="headerlink" href="#introduction-to-psconfig-templates" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="psconfig-templates-intro-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>As detailed in <a class="reference internal" href="psconfig_intro.html"><em>What is pSConfig?</em></a>, pSConfig&#8217;s workflow centers around <em>templates</em> that describe a topology of tasks. The concepts behind these templates and the format in which they are expressed are the primary focus of this document.</p>
<p>The templates themselves are in JSON format. You have a number of options for constructing the JSON including:</p>
<ul class="simple">
<li>Manually building the JSON in a text editor</li>
<li>Using <a class="reference internal" href="pwa.html"><em>pSConfig WebAdmin</em></a></li>
</ul>
<p>Regardless of how you build your template, the ideas described in this document are useful in understanding how pSConfig works. This document further provides the necessary foundation you need if you are building your templates manually or trying to understand the JSON of an existing file. After reading this document, you should be able to construct and understand a pSConfig template file.</p>
</div>
<div class="section" id="basic-concepts">
<span id="psconfig-templates-intro-concepts"></span><h2>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h2>
<p>Before diving into the actual JSON format of a pSConfig template, it&#8217;s helpful to first take a look at the basic concepts. This section describes some of the ideas behind templates in abstract terms. By the end of this section you should have an understanding of a template&#8217;s fundamental structure and be ready to translate that into the JSON format described in the <a class="reference internal" href="#psconfig-templates-intro-json-basics"><em>next section</em></a>.</p>
<div class="section" id="addresses">
<span id="psconfig-templates-intro-concepts-addresses"></span><h3>Addresses<a class="headerlink" href="#addresses" title="Permalink to this headline">¶</a></h3>
<p>The most basic unit of a template is an <strong>address</strong>. An address is a collection of properties that act as the unit of input to a task. Despite the name and the fact that pSConfig&#8217;s primary use case is in networking, an address is not necessarily connected to an interface or host. It is simply an object with properties. If it helps, think of each of the shapes in the diagram below as a pSConfig <em>address</em>:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-concepts-addrs.png" src="_images/psconfig_templates_intro-concepts-addrs.png" />
<p class="caption"><em>An abstract representation of three addresses as colored shapes.</em></p>
</div>
<p>Each of the shapes has certain properties such as they are all round and each is a particular color. In pSConfig terms, these properties can be used when constructing a task. Now let&#8217;s take a closer look at how we bring these properties together in <a class="reference internal" href="#psconfig-templates-intro-concepts-groups"><em>groups</em></a>.</p>
</div>
<div class="section" id="groups">
<span id="psconfig-templates-intro-concepts-groups"></span><h3>Groups<a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h3>
<p>A <strong>group</strong> is a description of how to combine addresses when building the list of tasks. All groups have a <em>type</em> that provides the base for how addresses are combined. Most types also provide type-specific options to customize that combination such as excluding specific pairs, directionality etc. Currently, pSConfig support three group types.</p>
<p>The first group type is <strong>mesh</strong>. A group of type mesh pairs every address with every other address in the group. Using the shapes from our <a class="reference internal" href="#psconfig-templates-intro-concepts-addresses"><em>addresses</em></a> example, if we add them all to a group of type mesh, we will get the pairs shown on the right of the diagram below:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-concepts-mesh.png" src="_images/psconfig_templates_intro-concepts-mesh.png" />
<p class="caption"><em>An abstract example of how addresses are combined in a group of type mesh.</em></p>
</div>
<p>The second group type is <strong>disjoint</strong>. A group of type disjoint pairs every address in one group (Group A) with every address in another group (Group B). Both groups can have one or more addresses. Using the shapes from our <a class="reference internal" href="#psconfig-templates-intro-concepts-addresses"><em>addresses</em></a> example, if we add them all to a disjoint group we will get the pairs shown on the right of the diagram below:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-concepts-disjoint.png" src="_images/psconfig_templates_intro-concepts-disjoint.png" />
<p class="caption"><em>An abstract example of how addresses are combined in a group of type disjoint.</em></p>
</div>
<p>The final group type is <strong>list</strong>. A group of type list returns each address independently. It is the only current type that does not pair addresses. Instead, it just generates a one-dimensional <em>list</em> of addresses (hence the name). Using the shapes from our <a class="reference internal" href="#psconfig-templates-intro-concepts-addresses"><em>addresses</em></a> example, if we add them all to a list group we will get the items shown on the right of the diagram below:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-concepts-list.png" src="_images/psconfig_templates_intro-concepts-list.png" />
<p class="caption"><em>An abstract example of how addresses are combined in a group of type list.</em></p>
</div>
<p>No matter which group type is used, we now have the basis for generating our task list. Let&#8217;s now explore how we can pull properties out of the generated pairs and <a class="reference internal" href="#psconfig-templates-intro-concepts-tasks"><em>construct a task</em></a></p>
</div>
<div class="section" id="tasks">
<span id="psconfig-templates-intro-concepts-tasks"></span><h3>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h3>
<p>As defined in <a class="reference internal" href="psconfig_intro.html"><em>What is pSConfig?</em></a>, a <strong>task</strong> is a job to do and consists of multiple components including:</p>
<ul class="simple">
<li>An input set of addresses as determined by the <em>group</em> (see <a class="reference internal" href="#psconfig-templates-intro-concepts-groups"><em>previous section</em></a>)</li>
<li>A <em>test</em> that contains the set of parameters required to perform the job of the task</li>
<li>An optional <em>schedule</em> that defines when the task should run</li>
<li>Zero or more <em>archives</em> that describe how to store the task results each time it runs</li>
</ul>
<p><strong>Template variables</strong> allow pSConfig to access properties of the task components listed above to connect the various pieces of the task together. A visual representation of a task definiton is shown in the following diagram:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-concepts-task.png" src="_images/psconfig_templates_intro-concepts-task.png" />
<p class="caption"><em>An abstract example of a task with a test using two template variables, an archive, and a schedule</em></p>
</div>
<p>In the above example, there is a test defined that extracts the color of the first address object using a template variable and does the same for a second input address.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The above definition is assuming this task is associated with a group that generates a pair of addresses. If it were used with a group of type <em>list</em> you would get an error since that group type only provides one address.</p>
</div>
<p>It also has a fixed schedule and archive definition. We could also use template variables in the definition of these components, but for the sake of this example that is not shown.</p>
<p>Now that we have our task defined let&#8217;s put together our group and our task to see the final result in the <a class="reference internal" href="#psconfig-templates-intro-concepts-conclusion"><em>next section</em></a>.</p>
</div>
<div class="section" id="putting-it-all-together">
<span id="psconfig-templates-intro-concepts-conclusion"></span><h3>Putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h3>
<p>The diagram below shows the output when we associate our <em>group</em> of type <em>mesh</em> with the task definition from the <a class="reference internal" href="#psconfig-templates-intro-concepts-tasks"><em>previous section</em></a>:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-concepts-conclusion.png" src="_images/psconfig_templates_intro-concepts-conclusion.png" />
<p class="caption"><em>The combination a group of type mesh and task definition yields a task for each address pair that contains the colors of both addresses in the the test portion of the task</em></p>
</div>
<p>As shown in the diagram, for each pair in the group, we generate a task to be run using properties of the input addresses. Notice that the color of each address in the generated pair is used in the test component.</p>
<p>This concludes our abstract look at pSConfig templates, now let&#8217;s take a look at how we build actual templates <a class="reference internal" href="#psconfig-templates-intro-json-basics"><em>using JSON</em></a>.</p>
</div>
</div>
<div class="section" id="json-basics">
<span id="psconfig-templates-intro-json-basics"></span><h2>JSON Basics<a class="headerlink" href="#json-basics" title="Permalink to this headline">¶</a></h2>
<p>pSConfig templates are formatted as <a class="reference external" href="https://www.json.org">JSON</a>. The abstract concepts outlined in the <a class="reference internal" href="#psconfig-templates-intro-concepts"><em>previous section</em></a> are all represented in the JSON. We will continue with our abstract examples from the previous section to highlight the basic structure of the JSON.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are more interested in an example closer to real-world applications, you may want to skip to the section <a class="reference internal" href="#psconfig-templates-intro-example"><em>Real-World Example</em></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">pSConfig template syntax is defined by our <a class="reference external" href="https://raw.githubusercontent.com/perfsonar/psconfig/master/doc/psconfig-schema.json">JSON Schema document</a>. It is almost impossible to list all the properties and combinations of things that can be expressed in a template within the confines of this documentation page, so for any questions the absolute source of truth is the <a class="reference external" href="https://raw.githubusercontent.com/perfsonar/psconfig/master/doc/psconfig-schema.json">JSON schema file</a>.</p>
</div>
<div class="section" id="psconfig-templates-intro-json-basics-addresses">
<span id="id1"></span><h3><tt class="docutils literal"><span class="pre">addresses</span></tt><a class="headerlink" href="#psconfig-templates-intro-json-basics-addresses" title="Permalink to this headline">¶</a></h3>
<p>pSConfig templates represent the <a class="reference internal" href="#psconfig-templates-intro-concepts-addresses"><em>concept of addresses</em></a> as JSON objects. Each address <em>object</em> has a single required <tt class="docutils literal"><span class="pre">address</span></tt> property as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;address&quot;</span><span class="p">:</span> <span class="s">&quot;circle1.perfsonar.net&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In that example the <tt class="docutils literal"><span class="pre">address</span></tt> property is set to <tt class="docutils literal"><span class="pre">circle1.perfsonar.net</span></tt>. The <tt class="docutils literal"><span class="pre">address</span></tt> property MUST be in the format of an IP address or hostname. This is done primarily for the benefit of agents trying to determine the addresses for which they are responsible (for example, see <a class="reference internal" href="psconfig_pscheduler_agent.html"><em>Running the pSConfig pScheduler Agent</em></a>). Keep in mind, there is no strict requirement the <tt class="docutils literal"><span class="pre">address</span></tt> property be used in the generated task at all, so think of it more an an identifier that happens to look like an IP or hostname.</p>
<p>The true power of addresses is revealed through the use of the <tt class="docutils literal"><span class="pre">_meta</span></tt> property. The <tt class="docutils literal"><span class="pre">_meta</span></tt> property is an optional arbitrary JSON object that can contain custom properties. Continuing with the <a class="reference internal" href="#psconfig-templates-intro-concepts-addresses"><em>circle example</em></a> we can describe the shape and color in JSON as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;address&quot;</span><span class="p">:</span> <span class="s">&quot;circle1.perfsonar.net&quot;</span><span class="p">,</span>
    <span class="s">&quot;_meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&quot;shape&quot;</span><span class="p">:</span> <span class="s">&quot;circle&quot;</span><span class="p">,</span>
        <span class="s">&quot;color&quot;</span><span class="p">:</span> <span class="s">&quot;blue&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that almost all objects in pSConfig have a <tt class="docutils literal"><span class="pre">_meta</span></tt> property that can be used to describe custom parameters, not just <em>address</em> object. It is useful not only for building tasks, but also providing additional information to agents reading the templates, such as names to display for a particular object.</p>
<p>Address objects live in the <tt class="docutils literal"><span class="pre">addresses</span></tt> section at the top-level of a pSConfig template. Each address object has a name that is used to references this object in other sections of the template. This name is just a string and can contain letters, numbers, colons (:), periods (.), underscores (_) or hyphens(-). In the example below, we take our current object and add it to the <tt class="docutils literal"><span class="pre">addresses</span></tt> section with the name <em>circle1</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;addresses&quot;: {
    &quot;circle1&quot;: {
        &quot;address&quot;: &quot;circle1.perfsonar.net&quot;,
        &quot;_meta&quot;: {
            &quot;shape&quot;: &quot;circle&quot;,
            &quot;color&quot;: &quot;blue&quot;
        }
}
</pre></div>
</div>
<p>Finally to round out the example, we can add the JSON representation of the other two circles from our <a class="reference internal" href="#psconfig-templates-intro-concepts-addresses"><em>earlier example</em></a>, noting that the <tt class="docutils literal"><span class="pre">color</span></tt> property changes in each <tt class="docutils literal"><span class="pre">_meta</span></tt> object:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;addresses&quot;: {
    &quot;circle1&quot;: {
        &quot;address&quot;: &quot;circle1.perfsonar.net&quot;,
        &quot;_meta&quot;: {
            &quot;shape&quot;: &quot;circle&quot;,
            &quot;color&quot;: &quot;blue&quot;
        }
    },
    &quot;circle2&quot;: {
        &quot;address&quot;: &quot;circle2.perfsonar.net&quot;,
        &quot;_meta&quot;: {
            &quot;shape&quot;: &quot;circle&quot;,
            &quot;color&quot;: &quot;red&quot;
        }
    },
    &quot;circle3&quot;: {
        &quot;address&quot;: &quot;circle3.perfsonar.net&quot;,
        &quot;_meta&quot;: {
            &quot;shape&quot;: &quot;circle&quot;,
            &quot;color&quot;: &quot;green&quot;
        }
    }
}
</pre></div>
</div>
</div>
<div class="section" id="psconfig-templates-intro-json-basics-groups">
<span id="id2"></span><h3><tt class="docutils literal"><span class="pre">groups</span></tt><a class="headerlink" href="#psconfig-templates-intro-json-basics-groups" title="Permalink to this headline">¶</a></h3>
<p>pSConfig templates represent the <a class="reference internal" href="#psconfig-templates-intro-concepts-groups"><em>concept of groups</em></a> as JSON objects. A <em>group</em> object has a required <tt class="docutils literal"><span class="pre">type</span></tt> property that indicates whether is is of type <em>mesh</em>, <em>disjoint</em> or <em>list</em>. Based on the type, there are additional required properties used to indicate which addresses belong in the group.</p>
<p>Groups of type <em>mesh</em> have one required property: <tt class="docutils literal"><span class="pre">addresses</span></tt>. An example is below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;mesh&quot;</span><span class="p">,</span>
    <span class="s">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle1&quot;</span><span class="p">},</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle2&quot;</span><span class="p">},</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle3&quot;</span><span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">addresses</span></tt> property is an array of <em>address selector</em> objects. These selectors describe which <em>address</em> objects to use from the <tt class="docutils literal"><span class="pre">addresses</span></tt> section of the template. The most common way to select is by name, as is done in the example above. This group will combine all of the addresses selected into pairs with all the other selected addresses.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Other types of address selectors are outside of the scope of this document but are detailed in <a class="reference internal" href="psconfig_templates_advanced.html#psconfig-templates-advanced-addresses-labels"><em>Labeling Address Properties</em></a> and <a class="reference internal" href="psconfig_autoconfig.html"><em>pSConfig Auto-Configuration</em></a>.</p>
</div>
<p>Groups of type <em>disjoint</em> have two required properties: <tt class="docutils literal"><span class="pre">a-addresses</span></tt> and <tt class="docutils literal"><span class="pre">b-addresses</span></tt>. An example is below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;disjoint&quot;</span><span class="p">,</span>
    <span class="s">&quot;a-addresses&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle1&quot;</span><span class="p">}</span>
     <span class="p">],</span>
     <span class="s">&quot;b-addresses&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle2&quot;</span><span class="p">},</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle3&quot;</span><span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Again, each is a list of <em>address selector</em> objects and this example selects by name. Just as in the <a class="reference internal" href="#psconfig-templates-intro-concepts-groups"><em>abstract example</em></a> of disjoint, the resulting group will combine <em>circle1</em> in <tt class="docutils literal"><span class="pre">a-addresses</span></tt> into pairs with the two circles in <tt class="docutils literal"><span class="pre">b-addresses</span></tt>.</p>
<p>Finally, we could also define a group of type <em>list</em>, and it only requires an <tt class="docutils literal"><span class="pre">addresses</span></tt> property be set which is (not-surprisingly) a list of address selectors:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;list&quot;</span><span class="p">,</span>
    <span class="s">&quot;addresses&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle1&quot;</span><span class="p">},</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle2&quot;</span><span class="p">},</span>
         <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;circle3&quot;</span><span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above example would generate a one-dimensional list containing each selected address object.</p>
<p>All of the <em>group</em> objects live in the <tt class="docutils literal"><span class="pre">groups</span></tt> section of a template. Each object is given a name just like in the <tt class="docutils literal"><span class="pre">addresses</span></tt> section. The name is used to references this object in other sections of the template and is a string that can contain letters, numbers, colons (:), periods (.), underscores (_) or hyphens(-). For our example, we are only going to use the mesh group, so it looks as follows with one group named <em>colors_mesh</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;groups&quot;: {
    &quot;colors_mesh&quot;: {
        &quot;type&quot;: &quot;mesh&quot;,
        &quot;addresses&quot;: [
             {&quot;name&quot;: &quot;circle1&quot;},
             {&quot;name&quot;: &quot;circle2&quot;},
             {&quot;name&quot;: &quot;circle3&quot;}
         ]
    }
}
</pre></div>
</div>
</div>
<div class="section" id="tests">
<span id="psconfig-templates-intro-json-basics-tests"></span><h3><tt class="docutils literal"><span class="pre">tests</span></tt><a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h3>
<p><em>Test</em> objects define the parameters of the job to be carried out by the task. A test object has a required <tt class="docutils literal"><span class="pre">type</span></tt> and <tt class="docutils literal"><span class="pre">spec</span></tt> property. The values of these properties, however, are completely opaque to pSConfig. Instead it relies on <a class="reference internal" href="pscheduler_intro.html"><em>pScheduler</em></a> to interpret the values. This is advantageous because as new plug-ins are installed into pScheduler, no corresponding changes are needed to the pSConfig source code. This means there are no pScheduler plug-ins out of reach for pSConfig.</p>
<p>Below is an example of a fictional <em>colors</em> test that assumes pScheduler supports a plug-in called <em>colors</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;tests&quot;: {
    &quot;colors_test&quot;: {
        &quot;type&quot;: &quot;colors&quot;,
        &quot;spec&quot;: {
            &quot;color1&quot;: &quot;{% jq addresses[0]._meta.color %}&quot;,
            &quot;color2&quot;: &quot;{% jq addresses[1]._meta.color %}&quot;
        }
    }
}
</pre></div>
</div>
<p>We&#8217;ll notice this fictitious plug-in supports a <tt class="docutils literal"><span class="pre">spec</span></tt> with two parameters called <tt class="docutils literal"><span class="pre">color1</span></tt> and <tt class="docutils literal"><span class="pre">color2</span></tt>. Those strange looking strings in the value are <em>template variables</em>, which we&#8217;ll take a closer look at in the <a class="reference internal" href="#psconfig-templates-intro-json-basics-vars"><em>next section</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information on valid pScheduler test specs, see <a class="reference internal" href="pscheduler_ref_tests_tools.html"><em>Test and Tool Reference</em></a>, the documentation of the test plug-in you are using or the documentation of the tool you are using to generate the JSON.</p>
</div>
</div>
<div class="section" id="template-variables">
<span id="psconfig-templates-intro-json-basics-vars"></span><h3>Template Variables<a class="headerlink" href="#template-variables" title="Permalink to this headline">¶</a></h3>
<p>Template variables are how we access properties of task components to connect them to other components. They can be included in strings of certain JSON objects and take the form of:</p>
<div class="highlight-python"><div class="highlight"><pre>{% VARIABLE %}
</pre></div>
</div>
<p>In our <a class="reference internal" href="#psconfig-templates-intro-json-basics-tests"><em>tests example</em></a> we saw use of the <tt class="docutils literal"><span class="pre">jq</span></tt> template variable. This variable uses the <a class="reference external" href="https://stedolan.github.io/jq/">jq processor</a> to select portions of the JSON. The first variable looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre>{% jq addresses[0]._meta.color %}
</pre></div>
</div>
<p>Let&#8217;s break this variable down:</p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">jq</span></tt> portion is simply the name of the variable.</li>
<li>The <tt class="docutils literal"><span class="pre">addresses[0]</span></tt> portion selects the first address in the pair generated by the group (as indicated by index 0 in between the square brackets)</li>
<li>the <tt class="docutils literal"><span class="pre">._meta</span></tt> portion selects the <tt class="docutils literal"><span class="pre">_meta</span></tt> object of that address</li>
<li>The <tt class="docutils literal"><span class="pre">.color</span></tt> portion selects the color property</li>
</ul>
<p>Likewise, the second variable looks as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>{% jq addresses[1]._meta.color %}
</pre></div>
</div>
<p>It is the same as the first except for the <tt class="docutils literal"><span class="pre">address[1]</span></tt> portion that indicates to use the second address (as indicated by index 1 in between the square brackets) from the input pair. As a result, <tt class="docutils literal"><span class="pre">color1</span></tt> receives the value of the <tt class="docutils literal"><span class="pre">color</span></tt> property from the first address in the pair and <tt class="docutils literal"><span class="pre">color2</span></tt> receives the <tt class="docutils literal"><span class="pre">color</span></tt> of the second.</p>
<p>There are many other template variables and listing them all is beyond the scope of this document. For more information on other template variables please see <a class="reference internal" href="psconfig_templates_vars.html"><em>pSConfig Template Variables</em></a>.</p>
</div>
<div class="section" id="archives">
<span id="psconfig-templates-intro-json-basics-archives"></span><h3><tt class="docutils literal"><span class="pre">archives</span></tt><a class="headerlink" href="#archives" title="Permalink to this headline">¶</a></h3>
<p><em>Archive</em> objects are optional components of the template that tell agents where the results of the described tasks are to be stored. <em>Archive</em> objects at a minimum have an <tt class="docutils literal"><span class="pre">archiver</span></tt> field that indicates the type of archive and a <tt class="docutils literal"><span class="pre">data</span></tt> field containing archive-specific parameters. <em>Archive</em> objects in pSConfig are taken directly from <a class="reference internal" href="pscheduler_intro.html"><em>pScheduler</em></a>. The only pSConfig-specific field in this object is the optional <tt class="docutils literal"><span class="pre">_meta</span></tt> tag that can be used for custom properties. Beyond that, pSConfig has no idea how to interpret the fields within an <tt class="docutils literal"><span class="pre">archive</span></tt> object. This is intentional as it does not require any changes to pSConfig when new archiver plug-ins are installed in pScheduler.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For valid specifications of these objects it is recommended you see the <a class="reference internal" href="pscheduler_ref_archivers.html"><em>pScheduler archiver reference</em></a>, the documentation for a specific plug-in or the documentation for the tool you are using to generate the JSON.</p>
</div>
<p>Below is an example of an <tt class="docutils literal"><span class="pre">archivers</span></tt> section we define that uses an <em>esmond</em> archiver:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;archives&quot;: {
     &quot;colors_archive&quot;: {
          &quot;archiver&quot;: &quot;esmond&quot;,
          &quot;data&quot;: {
              &quot;url&quot;: &quot;https://{% scheduled_by_address %}/esmond/perfsonar/archive/&quot;,
              &quot;measurement-agent&quot;: &quot;{% scheduled_by_address %}&quot;
          }
     }
 }
</pre></div>
</div>
<p>As we&#8217;ve seen in the other template sections, it is given a name <em>colors_archive</em> that can be referenced in other areas of this document. This definition also uses the template variable <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">scheduled_by_address</span> <span class="pre">%}</span></tt> in two places. This variable is replaced with <tt class="docutils literal"><span class="pre">address</span></tt> property associated with the address object representing the agent that will schedule the task. More information on this property can be found in <a class="reference internal" href="psconfig_templates_vars.html"><em>pSConfig Template Variables</em></a>. For the sake of this example, what&#8217;s perhaps more important than the variable meaning  is how it&#8217;s used. Notice that in the <tt class="docutils literal"><span class="pre">url</span></tt> property we have embedded the variable within text. pSConfig is able to expand this while leaving the surrounding text intact so we can dynamically build things like URLs. No matter how deep you embed a variable in an object, pSConfig will be able to expand it.</p>
</div>
<div class="section" id="schedules">
<span id="psconfig-templates-intro-json-basics-schedules"></span><h3><tt class="docutils literal"><span class="pre">schedules</span></tt><a class="headerlink" href="#schedules" title="Permalink to this headline">¶</a></h3>
<p><em>Schedule</em> objects are optional components of the template that tell agents where the results of the described tasks are to be stored. They are optional because you don&#8217;t need them for tasks that run continuously, but for periodic tasks they are needed if you want the task to run more than once. Schedule objects are borrowed directly from <a class="reference internal" href="pscheduler_intro.html"><em>pScheduler</em></a>. See the
<a class="reference external" href="https://raw.githubusercontent.com/perfsonar/psconfig/master/doc/psconfig-schema.json">schema file</a> for a full list of properties, but some of the more common ones are shown below:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;schedules&quot;: {
    &quot;colors_schedule&quot;: {
        &quot;repeat&quot;: &quot;PT1H&quot;,
        &quot;slip&quot;: &quot;PT1H&quot;,
        &quot;sliprand&quot;: true
    }
}
</pre></div>
</div>
<p>We define one schedule named <em>colors_schedule</em> which will tell a task using it to run on a random interval between every 1-2 hours. The <tt class="docutils literal"><span class="pre">repeat</span></tt> property is an ISO8601 duration telling a task that uses it to repeat at least every hour. The <tt class="docutils literal"><span class="pre">slip</span></tt> says that it can run up to 1 hour later than that (i.e. 2 hours). Finally, <tt class="docutils literal"><span class="pre">sliprand</span></tt> tells it to randomly choose an interval between those two values for each run. This is commonly done to prevent tests from bunching together at the beginning of a time interval. As stated earlier, you may use more or less options according to the schema, but the combination of these three is a common case.</p>
</div>
<div class="section" id="psconfig-templates-intro-json-basics-tasks">
<span id="id3"></span><h3><tt class="docutils literal"><span class="pre">tasks</span></tt><a class="headerlink" href="#psconfig-templates-intro-json-basics-tasks" title="Permalink to this headline">¶</a></h3>
<p>After building all of the components, we are finally ready to build our task. This is actually just a matter of referencing the names of the components we built above. Below is an example using the group, test, archive and schedule objects we defined, respectively:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;tasks&quot;: {
    &quot;colors_task&quot;: {
        &quot;group&quot;: &quot;colors_group&quot;,
        &quot;test&quot;: &quot;colors_test&quot;,
        &quot;schedule&quot;: &quot;colors_schedule&quot;,
        &quot;archives&quot;: [
             &quot;colors_archive&quot;
         ]
    }
}
</pre></div>
</div>
<p>Note that when building a task the only strictly required fields are <tt class="docutils literal"><span class="pre">group</span></tt> and <tt class="docutils literal"><span class="pre">test</span></tt>. Others like <tt class="docutils literal"><span class="pre">schedule</span></tt> and <tt class="docutils literal"><span class="pre">archives</span></tt> are not strictly required, but are commonly used since one generally needs to run a test more than once and store the results. There are additional fields that control the tool used, set the task priority and more but they are beyond the scope of this document.</p>
</div>
<div class="section" id="psconfig-templates-intro-json-basics-conclusion">
<span id="id4"></span><h3>Putting it all together<a class="headerlink" href="#psconfig-templates-intro-json-basics-conclusion" title="Permalink to this headline">¶</a></h3>
<p>You can download a full example of the JSON file described in this section <a class="reference download internal" href="_downloads/psconfig_templates_intro-colors.json"><tt class="xref download docutils literal"><span class="pre">here</span></tt></a>.</p>
</div>
</div>
<div class="section" id="real-world-example">
<span id="psconfig-templates-intro-example"></span><h2>Real-World Example<a class="headerlink" href="#real-world-example" title="Permalink to this headline">¶</a></h2>
<p>With the basic concepts behind us, we will now move away from the abstract and into an example with foundations closer to reality. The basic setup of the example is described by the diagram below:</p>
<div class="figure align-center">
<img alt="_images/psconfig_templates_intro-example-network.png" src="_images/psconfig_templates_intro-example-network.png" />
<p class="caption"><em>Example set of hosts we want to run tests between each other and publish to a central archive</em></p>
</div>
<p>In the diagram, hosts are represented by the images of blade servers. We have four hosts that we want to run latency and/or throughput tasks and a fifth host that does not schedule any tasks but instead stores the results of the others in a central archive. Under each server image is one or more hostnames of network interfaces attached to that host. The diagram color-codes the interface hostnames, but working counter-clockwise around the diagram each host has interfaces with the following role:</p>
<ul class="simple">
<li>The host at the top with the <em>esmond.archive.perfsonar.net</em> interface will not perform any tests and will be running an <a class="reference internal" href="multi_ma_install.html"><em>esmond</em></a> archive.</li>
<li>The host with a single interface addressed <em>lat1.perfsonar.net</em> will only run latency tests.</li>
<li>The host with a single interface addressed <em>thr1.perfsonar.net</em> will only run throughput tests.</li>
<li>The host with a single interface addressed <em>thrlat1.perfsonar.net</em> will run both latency and throughput tests on the same interface.</li>
<li>The host furthest to the right has two interfaces. The interface addressed <em>lat2.perfsonar.net</em> will run latency tests and the interface addressed <em>thr2.perfsonar.net</em> will run throughput tests.</li>
</ul>
<p>For our example, we want every latency interface to test to every other interface capable of running latency tests. Likewise we want every interface capable to running a throughput test to run to all the others that support throughput tests. Given this desired task topology, let&#8217;s walkthrough how we construct the JSON of a pSConfig template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The approach shown in this section is not the only way to express a template for the task topology described, it is simply one way. pSConfig is highly flexible and expressive so there is no one correct answer when building a template as long as the resulting task topology meets your goals.</p>
</div>
<div class="section" id="psconfig-templates-intro-example-addresses">
<span id="id5"></span><h3><tt class="docutils literal"><span class="pre">addresses</span></tt><a class="headerlink" href="#psconfig-templates-intro-example-addresses" title="Permalink to this headline">¶</a></h3>
<p>First we need to build our <tt class="docutils literal"><span class="pre">addresses</span></tt> section. Our <em>address</em> objects will correspond to the interfaces of the hosts in our diagram as shown below:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;addresses&quot;: {
    &quot;lat1&quot;: {
        &quot;address&quot;: &quot;lat1.perfsonar.net&quot;
    },
    &quot;thr1&quot;: {
        &quot;address&quot;: &quot;thr1.perfsonar.net&quot;
    },
   &quot;thrlat1&quot;: {
        &quot;address&quot;: &quot;thrlat1.perfsonar.net&quot;
    },
    &quot;lat2&quot;: {
        &quot;address&quot;: &quot;lat2.perfsonar.net&quot;
    },
    &quot;thr2&quot;: {
        &quot;address&quot;: &quot;thr2.perfsonar.net&quot;
    }
}
</pre></div>
</div>
<p>Notice that each has a name by which to reference it within the template and the required <tt class="docutils literal"><span class="pre">address</span></tt> property. It does not have any further fields such as <tt class="docutils literal"><span class="pre">_meta</span></tt> because we do not need them for the tests we are trying to build. Often these are the only fields you need, so it is not necessary to set any further information.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The addresses labelled <tt class="docutils literal"><span class="pre">lat2</span></tt> and <tt class="docutils literal"><span class="pre">thr2</span></tt> are separate <em>address</em> objects even though they are on the same physical host. From the perspective of the tasks we want to create, it doesn&#8217;t really matter that they are on the same host. If it did matter, pSConfig does provide a <a class="reference internal" href="psconfig_templates_advanced.html#psconfig-templates-advanced-hosts"><em>host object</em></a> that groups addresses. For the sake of keeping things concise though, we did not use it in this example since it is extraneous information for our desired task topology.</p>
</div>
</div>
<div class="section" id="psconfig-templates-intro-example-groups">
<span id="id6"></span><h3><tt class="docutils literal"><span class="pre">groups</span></tt><a class="headerlink" href="#psconfig-templates-intro-example-groups" title="Permalink to this headline">¶</a></h3>
<p>We combine the addresses into two groups of type <em>mesh</em>: one for latency tests and one for throughput tests:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;groups&quot;: {
       &quot;latency_group&quot;: {
           &quot;type&quot;: &quot;mesh&quot;,
           &quot;addresses&quot;: [
                {&quot;name&quot;: &quot;lat1&quot;},
                {&quot;name&quot;: &quot;thrlat1&quot;},
                {&quot;name&quot;: &quot;lat2&quot;}
            ]
       },
       &quot;throughput_group&quot;: {
           &quot;type&quot;: &quot;mesh&quot;,
           &quot;addresses&quot;: [
                {&quot;name&quot;: &quot;thr1&quot;},
                {&quot;name&quot;: &quot;thrlat1&quot;},
                {&quot;name&quot;: &quot;thr2&quot;}
            ]
       }
   }
</pre></div>
</div>
<p>Each group selects only those address objects that are marked in our diagram for latency tests and throughput tests, respectively. The only common member of each is the address with name <tt class="docutils literal"><span class="pre">thrlat1</span></tt> since it runs both types of tests. Since we are using the type <em>mesh</em>, every member address will run a test to every other member within the group. This matches our stated task topology.</p>
</div>
<div class="section" id="psconfig-templates-intro-example-tests">
<span id="id7"></span><h3><tt class="docutils literal"><span class="pre">tests</span></tt><a class="headerlink" href="#psconfig-templates-intro-example-tests" title="Permalink to this headline">¶</a></h3>
<p>We can now define the parameters of the two types of tests we want run in the <tt class="docutils literal"><span class="pre">tests</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;tests&quot;: {
    &quot;latency_test&quot;: {
        &quot;type&quot;: &quot;latencybg&quot;,
        &quot;spec&quot;: {
            &quot;source&quot;: &quot;{% address[0] %}&quot;,
            &quot;dest&quot;: &quot;{% address[1] %}&quot;,
            &quot;packet-interval&quot;: 0.1,
            &quot;packet-count&quot;: 600
        }
    },
    &quot;throughput_test&quot;: {
        &quot;type&quot;: &quot;throughput&quot;,
        &quot;spec&quot;: {
            &quot;source&quot;: &quot;{% address[0] %}&quot;,
            &quot;dest&quot;: &quot;{% address[1] %}&quot;,
            &quot;duration&quot;: &quot;PT30S&quot;
        }
    }
}
</pre></div>
</div>
<p>Our first test, named <tt class="docutils literal"><span class="pre">latency_test</span></tt>, defines a test of type <tt class="docutils literal"><span class="pre">latencybg</span></tt>. The type must always correspond to a pScheduler plug-in since pSConfig has no knowledge of how to interpret tests. The <tt class="docutils literal"><span class="pre">latencybg</span></tt> type creates a test that continuously runs latency measurements. We have given it the following parameters in the <tt class="docutils literal"><span class="pre">spec</span></tt>:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">source</span></tt> is a hostname or IP indicating the <em>sender</em> of data in the test. We set it to the special template variable <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">address[0]</span> <span class="pre">%}</span></tt>. This variable means take the <tt class="docutils literal"><span class="pre">address</span></tt> property of the <em>first address</em> object in the pair generated by the parent task&#8217;s group. Since the <tt class="docutils literal"><span class="pre">address</span></tt> property must be a hostname or IP by definition, using this template variable also meets the requirements of <tt class="docutils literal"><span class="pre">source</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">dest</span></tt> is a hostname or IP indicating the <em>receiver</em> of data in the test. We set it to the special template variable <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">address[1]</span> <span class="pre">%}</span></tt>. This variable means take the <tt class="docutils literal"><span class="pre">address</span></tt> property of the <em>second address</em> object in the pair generated by the parent task&#8217;s group. Since the <tt class="docutils literal"><span class="pre">address</span></tt> property must be a hostname or IP by definition, using this template variable also meets the requirements of <tt class="docutils literal"><span class="pre">dest</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">packet-interval</span></tt> is the time in seconds in between sending individual packets. A value of <tt class="docutils literal"><span class="pre">0.1</span></tt> indicates to send 10 packets per second.</li>
<li>The <tt class="docutils literal"><span class="pre">packet-count</span></tt> is the number of packets to send before reporting a result. A value of <tt class="docutils literal"><span class="pre">600</span></tt> indicates to send 600 packets before generating a summary and reporting a result. Combined with our <tt class="docutils literal"><span class="pre">packet-interval</span></tt> and the fact that this type of test runs continuously, there will be a result reported every 60 seconds.</li>
</ul>
<p>The second test, named <cite>throughput_test</cite>, defines a test of type <tt class="docutils literal"><span class="pre">throughput</span></tt>. This creates a test that periodically runs a measurement of network throughput. Our <tt class="docutils literal"><span class="pre">spec</span></tt> defines the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">source</span></tt> is a hostname or IP indicating the <em>sender</em> of data in the test. Just as in our <tt class="docutils literal"><span class="pre">latencybg</span></tt> test we set the value to the template variable <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">address[0]</span> <span class="pre">%}</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">dest</span></tt> is a hostname or IP indicating the <em>receiver</em> of data in the test. Again, just as in our <tt class="docutils literal"><span class="pre">latencybg</span></tt> test we set the value to the template variable <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">address[1]</span> <span class="pre">%}</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">duration</span></tt> indicates the length of time to run the test as an ISO8601 duration. In our example the test will run for 30 seconds.</li>
</ul>
</div>
<div class="section" id="psconfig-templates-intro-example-archives">
<span id="id8"></span><h3><tt class="docutils literal"><span class="pre">archives</span></tt><a class="headerlink" href="#psconfig-templates-intro-example-archives" title="Permalink to this headline">¶</a></h3>
<p>We have a single host dedicated to archiving the results from all the others. It is defined in the following <tt class="docutils literal"><span class="pre">archives</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;archives&quot;: {
   &quot;esmond_archive&quot;: {
        &quot;archiver&quot;: &quot;esmond&quot;,
        &quot;data&quot;: {
            &quot;url&quot;: &quot;https://esmond.archive.perfsonar.net/esmond/perfsonar/archive&quot;,
            &quot;measurement-agent&quot;: &quot;{% scheduled_by_address %}&quot;
        }
    }
}
</pre></div>
</div>
<p>As stated before, it is running esmond, so we use the <tt class="docutils literal"><span class="pre">archiver</span></tt> of type <tt class="docutils literal"><span class="pre">esmond</span></tt>. For the <tt class="docutils literal"><span class="pre">data</span></tt> section we have two fields:</p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">url</span></tt> is a fixed URL pointing at <em>esmond.archive.perfsonar.net</em> as listed in our diagram. Since all the measurements will get registered to the same place, no template variables are needed for the <tt class="docutils literal"><span class="pre">url</span></tt>.</li>
<li>The <tt class="docutils literal"><span class="pre">measurement-agent</span></tt> is a field esmond uses to keep track of the host that requested the original measurement. Here we can use the <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">scheduled_by_address</span> <span class="pre">%}</span></tt> template variable to have the agent automatically fill-in the value since it will depend on where the agent is running that creates the task.</li>
</ul>
</div>
<div class="section" id="psconfig-templates-intro-example-schedules">
<span id="id9"></span><h3><tt class="docutils literal"><span class="pre">schedules</span></tt><a class="headerlink" href="#psconfig-templates-intro-example-schedules" title="Permalink to this headline">¶</a></h3>
<p>Our throughput test will need a schedule so we create one below that will randomly run the test every 4-8 hours:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;schedules&quot;: {
   &quot;every_4_hours&quot;: {
        &quot;repeat&quot;: &quot;PT4H&quot;,
        &quot;slip&quot;: &quot;PT4H&quot;,
        &quot;sliprand&quot;: true
    }
}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">latencybg</span></tt> tests run continuously, so they do not need an explicit schedule.</p>
</div>
</div>
<div class="section" id="psconfig-templates-intro-example-tasks">
<span id="id10"></span><h3><tt class="docutils literal"><span class="pre">tasks</span></tt><a class="headerlink" href="#psconfig-templates-intro-example-tasks" title="Permalink to this headline">¶</a></h3>
<p>Now that all our components have been created, we can finally create our task definitions:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;tasks&quot;: {
    &quot;latency_task&quot;: {
        &quot;group&quot;: &quot;latency_group&quot;,
        &quot;test&quot;: &quot;latency_test&quot;,
        &quot;archives&quot;: [&quot;esmond_archive&quot;]
    },
    &quot;throughput_task&quot;: {
        &quot;group&quot;: &quot;throughput_group&quot;,
        &quot;test&quot;: &quot;throughput_test&quot;,
        &quot;archives&quot;: [&quot;esmond_archive&quot;],
        &quot;schedule&quot;: &quot;every_4_hours&quot;
    }
}
</pre></div>
</div>
<p>As expected there are two tasks: one for latency measurements and another for throughput measurements. Notice that <tt class="docutils literal"><span class="pre">latency_task</span></tt> does not reference a schedule whereas <tt class="docutils literal"><span class="pre">throughput_task</span></tt> does. This is because <tt class="docutils literal"><span class="pre">latency_task</span></tt> runs continuously whereas <tt class="docutils literal"><span class="pre">throughput_task</span></tt> is on a periodic schedule. Beyond that, the task references the other components by name. With this final piece in place, we now have a complete template that describes our originally stated task topology.</p>
</div>
<div class="section" id="psconfig-templates-intro-conclusion">
<span id="id11"></span><h3>Putting it all together<a class="headerlink" href="#psconfig-templates-intro-conclusion" title="Permalink to this headline">¶</a></h3>
<p>You can download a full example of the JSON file described in this section <a class="reference download internal" href="_downloads/psconfig_templates_intro-network.json"><tt class="xref download docutils literal"><span class="pre">here</span></tt></a>.</p>
<p>For more example templates see the directory <tt class="docutils literal"><span class="pre">/usr/share/doc/perfsonar/psconfig</span></tt> on any host with a pSConfig package installed. In particular see <tt class="docutils literal"><span class="pre">/usr/share/doc/perfsonar/psconfig/skeleton.json</span></tt> for a good starting point of building your own template.</p>
</div>
</div>
<div class="section" id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://raw.githubusercontent.com/perfsonar/psconfig/master/doc/psconfig-schema.json">pSConfig Template JSON Schema</a></li>
<li><a class="reference internal" href="psconfig_templates_vars.html"><em>pSConfig Template Variables</em></a></li>
<li><a class="reference internal" href="psconfig_templates_advanced.html"><em>Advanced pSConfig Templates</em></a></li>
<li><a class="reference internal" href="psconfig_autoconfig.html"><em>pSConfig Auto-Configuration</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <nav id="channelNav" class="channelNav">
                
                <ul>
<li><a class="reference internal" href="#">Introduction to pSConfig Templates</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#basic-concepts">Basic Concepts</a><ul>
<li><a class="reference internal" href="#addresses">Addresses</a></li>
<li><a class="reference internal" href="#groups">Groups</a></li>
<li><a class="reference internal" href="#tasks">Tasks</a></li>
<li><a class="reference internal" href="#putting-it-all-together">Putting it all together</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-basics">JSON Basics</a><ul>
<li><a class="reference internal" href="#psconfig-templates-intro-json-basics-addresses"><tt class="docutils literal"><span class="pre">addresses</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-json-basics-groups"><tt class="docutils literal"><span class="pre">groups</span></tt></a></li>
<li><a class="reference internal" href="#tests"><tt class="docutils literal"><span class="pre">tests</span></tt></a></li>
<li><a class="reference internal" href="#template-variables">Template Variables</a></li>
<li><a class="reference internal" href="#archives"><tt class="docutils literal"><span class="pre">archives</span></tt></a></li>
<li><a class="reference internal" href="#schedules"><tt class="docutils literal"><span class="pre">schedules</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-json-basics-tasks"><tt class="docutils literal"><span class="pre">tasks</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-json-basics-conclusion">Putting it all together</a></li>
</ul>
</li>
<li><a class="reference internal" href="#real-world-example">Real-World Example</a><ul>
<li><a class="reference internal" href="#psconfig-templates-intro-example-addresses"><tt class="docutils literal"><span class="pre">addresses</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-example-groups"><tt class="docutils literal"><span class="pre">groups</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-example-tests"><tt class="docutils literal"><span class="pre">tests</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-example-archives"><tt class="docutils literal"><span class="pre">archives</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-example-schedules"><tt class="docutils literal"><span class="pre">schedules</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-example-tasks"><tt class="docutils literal"><span class="pre">tasks</span></tt></a></li>
<li><a class="reference internal" href="#psconfig-templates-intro-conclusion">Putting it all together</a></li>
</ul>
</li>
<li><a class="reference internal" href="#further-reading">Further Reading</a></li>
</ul>
</li>
</ul>

                <ul>
                  <li>
                  <a href="psconfig_quickstart.html">Previous topic</a>
                  <ul><li><a href="psconfig_quickstart.html" title="previous chapter">pSConfig Quickstart Guide</a></li></ul>
                  </li>
                </ul>
                  <ul>
                      <li>
                      <a href="psconfig_publish.html">Next topic</a>
                      <ul><li><a href="psconfig_publish.html" title="next chapter">Publishing a pSConfig Template</a></li></ul>
                      </li>
                  </ul>
                
                
            </nav>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="psconfig_publish.html" title="Publishing a pSConfig Template"
             >next</a> |</li>
        <li class="right" >
          <a href="psconfig_quickstart.html" title="pSConfig Quickstart Guide"
             >previous</a> |</li>
        <li><a href="index.html">perfSONAR Toolkit 4.1.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <footer id="fat">
        <div class="footerContents">
            <nav id="fatFooterNav" class="fatFooterNav">
                <ul id="menu-partners" class="menu depth-0">
                    <li id="footer-partner-text" class="partner-menu">
                        perfSONAR 
                        <br>
                        partners 
                        <br>
                        include: 
                    </li>
    
                <li id="footer-partner-esnet" class="partner-menu">
                    <a href="http://www.es.net/" title="Visit DOE's Energy Sciences Network"><img src="_static/ESnet-ps.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-geant" class="partner-menu">
                    <a href="http://www.geant.org/" title="Visit GEANT"><img src="_static/geant-ps.png" alt="" style="border:none;"/></a> </li>
        
                <li id="footer-partner-iu" class="partner-menu">
                    <a href="http://www.iu.edu/" title="Visit Indiana University"><img src="_static/IU-ps.png" alt="" style="border:none;"></a> </li>

                <li id="footer-partner-i2" class="partner-menu">
                    <a href="http://www.internet2.edu/" title="Visit Internet2"><img src="_static/I2-ps.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-um" class="partner-menu">
                    <a href="http://www.umich.edu/" title="Visit University of Michigan"><img src="_static/UM-ps.png" alt="" style="border:none;"></a> </li>

                </ul>

            </nav>
            <nav id="minFooterNav" class="minFooterNav">
                <span class="copyright">PERFormance Service Oriented Network monitoring ARchitecture </span>
            </nav>
          
        </div> <!-- /footerContents -->
    </footer>
    
    <div class="footer">
        &copy; Copyright 2018, perfSONAR Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>